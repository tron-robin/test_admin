(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-fx-lv-setting"],{"48b4":function(e,t,a){"use strict";a.r(t);var i=a("b86c"),n=a("f348");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);var r=a("f0c5"),l=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"061e43ad",null,!1,i["a"],void 0);t["default"]=l.exports},b705:function(e,t,a){"use strict";var i;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("b64b"),a("c975"),a("a9e3"),a("d9e2"),a("d401");var n=uni.vk,o={data:function(){var e=this;return{mchInfo:{},data:{},loading:!1,page:{title:"会员等级",submitText:"设置",cancelText:"返回",showBack:!1,backPage:""},form1:{data:{},props:{action:"admin/business/sys.mch.updateFxLevelRule",columns:[{key:"level_rule",title:"",type:"array<object>",showLabel:!1,size:"small",showAdd:!0,showClear:!1,showSort:!1,defaultValue:{name:"",discount:"",total_recharge_amount:"",total_order_amount:"",is_free_shipping:!1,free_shipping_min_order_amount:"",integral_ratio:1,upgrade_mode:0,min_vip_lv:""},maxlength:10,rightBtns:[{mode:"delete",title:"删除",show:function(e,t){return t>0}}],columnIndexMethod:function(e){var t="Lv.".concat(e);return t},columns:[{key:"name",title:"等级名称",type:"text",width:160,clearable:!1,placeholder:"输入等级名称",isUnique:!0,rules:[{required:!0,message:"该项不能为空",trigger:["change","blur"]},{min:1,max:8,message:"长度在 1 到 8 个字符",trigger:["change","blur"]}]},{key:"share_reward_1",title:"直推奖励倍数",type:"number",width:130,placeholder:"倍数",rightText:"倍",incMode:2,clearable:!1},{key:"share_reward_2",title:"间推奖励倍数",type:"number",width:130,placeholder:"倍数",rightText:"倍",incMode:2,clearable:!1},{key:"min_vip_lv",title:"最低会员等级",placeholder:"会员等级",type:"select",width:140,data:function(){return e.mchInfo.vip_level_rule||[]},props:{value:"lv",label:"name",children:"children"},disabled:"upgrade_mode!=1",rules:[{validator:function(t,a,i,n){var o=e,r=e.vk,l=Object.keys(n)[0],s=l.indexOf("."),d=s+1+l.substring(s+1).indexOf(".");if(s>-1&&d>-1){var c=Number(l.substring(s+1,d));if(!isNaN(c)){var u=o.form1.data.level_rule[c];if(1===u.upgrade_mode&&r.pubfn.isNull(a))return i(new Error("请选择会员等级"))}}i()},trigger:["blur","change"]}]},{key:"upgrade_mode",title:"升级模式",type:"radio",width:200,optionType:"button",data:[{value:1,label:"简单模式"},{value:0,label:"常规模式"}],disabled:"lv==0"},{key:"vip_lv",title:"赠送会员等级",type:"select",width:140,placeholder:"会员等级",data:function(){return e.mchInfo.vip_level_rule||[]},props:{value:"lv",label:"name",children:"children"},disabled:"upgrade_mode>0"},{key:"total_recharge_amount",title:"条件1：累计充值",type:"money",width:140,placeholder:"金额",rightText:"元",incMode:2,clearable:!1,disabled:"lv==0||upgrade_mode>0"},{key:"total_order_amount",title:"条件1：累计消费",type:"money",width:140,placeholder:"金额",rightText:"元",incMode:2,clearable:!1,disabled:"lv==0||upgrade_mode>0"},{key:"total_per_1",title:"条件2：直推业绩",type:"money",width:150,placeholder:"金额",rightText:"元",incMode:2,clearable:!1,disabled:"lv==0||upgrade_mode>0"},{key:"total_share_1",title:"条件3：直推人数",type:"number",width:140,placeholder:"人数",rightText:"人",incMode:2,clearable:!1,disabled:"lv==0||upgrade_mode>0"}]}],rules:{},labelWidth:"100px"}}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,n=i.vk,i.options=e,i.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){var t=this;n.callFunction({url:"client/pub.getMchInfo",loading:!0,data:{},success:function(e){t.mchInfo=e.mchInfo,t.$refs.form1.setFormData(e.mchInfo.fx)}})},pageTo:function(e){n.navigateTo(e)},pageBack:function(){var e=getCurrentPages();e.length>1&&e[0].route!==i.$page.route?n.navigateBack():i.page.backPage&&n.navigateTo(i.page.backPage)},resetForm:function(){i.$refs.form1.resetForm()},submitForm:function(){i.$refs.form1.submitForm()},formSuccess:function(e){n.setVuex("$user.mchInfo",e.data.info)}},watch:{},computed:{}};t.default=o},b86c:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("vk-data-page-header",{attrs:{title:e.page.title,"show-back":e.page.showBack},on:{back:function(t){arguments[0]=t=e.$handleEvent(t),e.pageBack.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"page-body"},[a("v-uni-view",{staticStyle:{"margin-bottom":"10px","font-size":"14px"}},[a("v-uni-view",{staticClass:"tips"},[e._v("注意：")]),a("v-uni-view",{staticClass:"tips"},[e._v("1、Lv.0 用户成为分销员后的初始等级")]),a("v-uni-view",{staticClass:"tips"},[e._v("2、赠送会员等级：当用户满足条件升级到此等级时，如果用户的会员等级低于此等级，则升级到此会员等级")]),a("v-uni-view",{staticClass:"tips"},[e._v("3、相同条件之间是 或 的关系，不同条件之间是 和 的关系")]),a("v-uni-view",{staticClass:"tips"},[e._v("4、简单模式：分销等级的升级条件只需要满足最低会员等级即可。可以只为某一个，或某几个分销等级开放简单升级模式。")])],1),a("vk-data-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form1",attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"footer-show":!1},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.formSuccess.apply(void 0,arguments)}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1),a("v-uni-view",{staticClass:"page-footer"},[a("el-button",{staticStyle:{"margin-right":"20px",width:"80px"},attrs:{plain:!0,loading:e.form1.props.loading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.resetForm.apply(void 0,arguments)}}},[e._v("重置")]),a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:e.form1.props.loading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v(e._s(e.page.submitText))])],1),a("v-uni-view",{staticClass:"page-dialog"})],1)},n=[]},f348:function(e,t,a){"use strict";a.r(t);var i=a("b705"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a}}]);