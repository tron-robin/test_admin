(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-comment-sign_list"],{"16bd":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".check-tag-size[data-v-03f7dfbe]{width:80px;height:25px;font-size:12px;background:red;color:#fff;text-align:center;line-height:22px;border-radius:4px;margin-left:35px}.red-bg[data-v-03f7dfbe]{background-color:#f56c6c}.green-bg[data-v-03f7dfbe]{background-color:#67c23a}",""]),e.exports=t},"18fe":function(e,t,n){"use strict";var a;n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d81d"),n("14d9");var i=uni.vk,o={},r={data:function(){return{loading:!1,data:{},table1:{action:"admin/business/sys.goods.getSignList",columns:[{key:"name",title:"名称",type:"text",minWidth:180},{key:"mobile",title:"手机号",type:"text",minWidth:180},{key:"idCardNo",title:"身份证号",type:"text",minWidth:180},{key:"is_sign",title:"状态",type:"html",align:"center",width:"200px",formatter:function(e,t,n,a){return e?'<view style="width: 80px;height: 25px; font-size: 12px; background: red; color: #fff; text-align: center; line-height: 25px;border-radius: 4px;margin-left: 60px;background: rgb(103, 194, 58)">已签到</view> ':'<view style="width: 80px;height: 25px; font-size: 12px; background: red; color: #fff; text-align: center; line-height: 25px;border-radius: 4px;margin-left: 60px;background:rgb(255,108,108)">未签到</view> '}},{key:"scan_login_time",title:"签到时间",type:"text",width:320,formatter:function(e,t,n,a){return t.is_sign?i.pubfn.timeFormat(e):""}}],multipleSelection:[],selectItem:"",customeRightBtns:[{title:"审核",type:"primary",icon:"el-icon-edit",show:function(e){return 0==e.status}}]},queryForm1:{formData:{goods_id:""},columns:[{key:"goods_id",title:"活动",type:"table-select",placeholder:"选择活动",fieldName:"goods_id",action:"admin/business/sys.goods.getList",mode:"=",formData:{status:0},columns:[{key:"goods_thumb",title:"活动展示图",type:"avatar",imageWidth:40},{key:"name",title:"活动名称",type:"text",width:160,align:"left"},{key:"categoryList",title:"所属分类",type:"text",width:140,defaultValue:"暂无",formatter:function(e,t,n,a){var i="";return e.map((function(e,t){t>0&&(i+="、"),i+=e.name})),i}},{key:"stock",title:"商品库存",type:"number",width:110,show:["row"]}],queryColumns:[{key:"name",type:"text",title:"活动名称",placeholder:"活动名称",width:220,mode:"%%"},{key:"category_ids",title:"分类",type:"cascader",width:250,mode:"in",action:"admin/business/sys.goodsCategory.kh_getList",props:{list:"rows",value:"_id",label:"name",children:"children",checkStrictly:!0,emitPath:!1}},{key:"_id",title:"标识",type:"text",width:150,mode:"=",show:!1}]},{key:"name",title:"用户名称",type:"text",mode:"%%",width:140},{key:"scan_login_time",title:"签到时间",type:"datetimerange",width:340}],sortRule:[{name:"scan_num",type:"asc"},{name:"scan_login_time",type:"desc"}]},form1:{},formData1:{title:"审核",action:"admin/business/sys.goodsComment.update",columns:[{key:"goods_name",title:"商品名称",type:"text-view"},{key:"content",title:"评价内容",type:"text-view"},{key:"images",title:"图片",type:"image",disabled:!0},{key:"status",title:"状态",type:"radio",data:[{value:-1,label:"审核拒绝"},{value:0,label:"待审核"},{value:1,label:"审核通过"}]}],rules:{status:[{required:!0,message:"状态不能为空",trigger:"blur"},{type:"number",message:"状态必须是数字",trigger:"blur"}]},formType:"update",show:!1}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=this,i=a.vk,a.options=e,a.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){o["form1"]=i.pubfn.copyObject(a.form1),e._id&&(a.queryForm1.formData.goods_id=e._id)},pageTo:function(e){i.navigateTo(e)},pageBack:function(e){var t=getCurrentPages();t.length>1&&t[0].route!==a.$page.route?i.navigateBack():e&&i.navigateTo(e)},resetForm:function(){i.pubfn.resetForm(o,a)},search:function(){a.$refs.table1.query()},refresh:function(){a.$refs.table1.refresh()},getCurrentRow:function(e){return a.$refs.table1.getCurrentRow(e)},currentChange:function(e){a.table1.selectItem=e},selectionChange:function(e){a.table1.multipleSelection=e},deleteBtn:function(e){var t=e.item,n=e.deleteFn;n({action:"admin/business/sys.goodsComment.delete",data:{_id:t._id}})},customRightBtns:function(e,t){"审核"===t.title&&a.examine(e)},examine:function(e){a.formData1.show=!0,a.form1=e},examineSuccess:function(e){var t=e.data,n=a.getCurrentRow(!0);a.formData1.show=!1,n.status=t.status},batchBtn:function(e){switch(e){case 1:a.batchAudit(1);break;case 2:a.batchAudit(-1);break;default:break}},batchAudit:function(e){var t=[];a.table1.multipleSelection.map((function(e,n){t.push(e._id)}));var n={ids:t,status:e};i.callFunction({url:"admin/business/sys.goodsComment.update",title:"请求中...",data:n,success:function(e){a.$notify({message:"批量操作成功!",type:"success"}),a.refresh()}})}},watch:{},computed:{}};t.default=r},"3d55":function(e,t,n){"use strict";n.r(t);var a=n("41a2"),i=n("7445");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("51dc");var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"03f7dfbe",null,!1,a["a"],void 0);t["default"]=s.exports},"41a2":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page-body"},[n("vk-data-table-query",{attrs:{columns:e.queryForm1.columns,size:"mini"},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),n("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,size:"mini","row-no":!0,pagination:!0,selection:!0},on:{delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),n("vk-data-dialog",{attrs:{title:e.formData1.title,width:"500px",mode:"form"},model:{value:e.formData1.show,callback:function(t){e.$set(e.formData1,"show",t)},expression:"formData1.show"}},[n("vk-data-form",{attrs:{rules:e.formData1.rules,action:e.formData1.action,"form-type":e.formData1.formType,columns:e.formData1.columns,"label-width":"90px"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.examineSuccess.apply(void 0,arguments)}},model:{value:e.form1,callback:function(t){e.form1=t},expression:"form1"}},[n("template",{slot:"content"},[n("v-uni-view",[e.form1.user_info?n("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[n("el-image",{staticClass:"image-avatar",attrs:{src:e.form1.user_info.avatar,fit:"cover"}}),n("v-uni-view",{staticStyle:{"margin-left":"8px"}},[e._v(e._s(e.form1.user_info.nickname)+" :")])],1):e._e(),n("v-uni-view",{staticStyle:{"line-height":"1.5"}},[e._v(e._s(e.form1.content))])],1)],1)],2)],1)],1)},i=[]},"51dc":function(e,t,n){"use strict";var a=n("e2ce"),i=n.n(a);i.a},7445:function(e,t,n){"use strict";n.r(t);var a=n("18fe"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},e2ce:function(e,t,n){var a=n("16bd");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("4d7054bb",a,!0,{sourceMap:!1,shadowMode:!1})}}]);