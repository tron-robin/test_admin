(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-freight-list"],{"1f41":function(e,t,n){"use strict";n.r(t);var i=n("fdfe"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},2163:function(e,t,n){"use strict";n.r(t);var i=n("f324"),a=n("1f41");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("79a7");var r=n("f0c5"),l=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"791cc260",null,!1,i["a"],void 0);t["default"]=l.exports},"243b":function(e,t,n){var i=n("eeee");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("fe50cb9c",i,!0,{sourceMap:!1,shadowMode:!1})},"79a7":function(e,t,n){"use strict";var i=n("243b"),a=n.n(i);a.a},eeee:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".checkbox .el-checkbox[data-v-791cc260]{width:20%;margin-top:15px}.checkbox .el-button[data-v-791cc260]{margin-left:auto}[data-v-791cc260] .el-dialog{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}[data-v-791cc260] .el-dialog__body{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.el-header[data-v-791cc260]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.el-header[data-v-791cc260]  .header_input{-webkit-box-flex:0.4;-ms-flex:0.4;flex:0.4}.el-header[data-v-791cc260]  .header_input:first-of-type{margin-right:50px}",""]),e.exports=t},f324:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page-body"},[n("vk-data-table-query",{attrs:{columns:e.queryForm1.columns,size:"mini"},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}},[n("template",{slot:"right-btns"},[n("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("添加")])],1)],2),n("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":["detail_auto","update","delete"],"row-no":!0,pagination:!0,size:"mini"},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),n("vk-data-drawer",{attrs:{title:e.formData1.title,center:!0,width:"1000px"},model:{value:e.formData1.show,callback:function(t){e.$set(e.formData1,"show",t)},expression:"formData1.show"}},[n("vk-data-form",{staticStyle:{padding:"20px"},attrs:{rules:e.formData1.rules,action:e.formData1.action,"form-type":e.formData1.formType,columns:e.formData1.columns,"label-width":"120px","submit-disabled":e.submit_disabled},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.formSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"freight_rules",fn:function(t){t.form,t.keyName;var i=t.val;return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.select_province.apply(void 0,arguments)}}},[e._v("添加可配送区域")]),n("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:i,fit:!0,border:!0,size:"small"}},[n("el-table-column",{attrs:{label:"可配送区域","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("v-uni-text",[e._v(e._s(t.row.province_names.join("、")))])]}}],null,!0)}),n("el-table-column",{attrs:{label:"首重（KG）",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("vk-data-input-number",{attrs:{precision:0,placeholder:"请输入首重",size:"small"},model:{value:t.row.first_weight,callback:function(n){e.$set(t.row,"first_weight",n)},expression:"scope.row.first_weight"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"运费（元）",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("vk-data-input-money",{attrs:{placeholder:"请输入运费",size:"small"},model:{value:t.row.first_weight_price,callback:function(n){e.$set(t.row,"first_weight_price",n)},expression:"scope.row.first_weight_price"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"续重（KG）",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("vk-data-input-number",{attrs:{precision:0,placeholder:"请输入续重",size:"small"},model:{value:t.row.continuous_weight,callback:function(n){e.$set(t.row,"continuous_weight",n)},expression:"scope.row.continuous_weight"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"续费（元）",width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("vk-data-input-money",{attrs:{placeholder:"请输入续费",size:"small"},model:{value:t.row.continuous_weight_price,callback:function(n){e.$set(t.row,"continuous_weight_price",n)},expression:"scope.row.continuous_weight_price"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("v-uni-view",{staticStyle:{display:"flex","justify-content":"center"}},[n("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.updateProvinceBtn(t.row,t.$index)}}},[e._v("修改")]),n("el-link",{staticStyle:{"margin-left":"20px"},attrs:{underline:!1,type:"danger"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.deleteProvinceBtn(t.$index)}}},[e._v("删除")])],1)]}}],null,!0)})],1)]}}]),model:{value:e.form1,callback:function(t){e.form1=t},expression:"form1"}})],1),n("vk-data-dialog",{attrs:{title:"省份选择",center:!0},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.checkProvinceList=[],e.updateProvinceBtn_flag=!1}},model:{value:e.formData2.show,callback:function(t){e.$set(e.formData2,"show",t)},expression:"formData2.show"}},[n("v-uni-view",{staticClass:"checkbox"},[n("el-checkbox-group",{model:{value:e.checkProvinceList,callback:function(t){e.checkProvinceList=t},expression:"checkProvinceList"}},e._l(e.province,(function(t,i){return n("el-checkbox",{key:i,attrs:{label:t.code,disabled:e._f("disabled_list")(t.code)}},[e._v(e._s(t.name))])})),1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",disabled:!e.checkProvinceList.length},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectProvinceSubmit.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)],1)},a=[]},fdfe:function(e,t,n){"use strict";n("7a82");var i=n("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=i(n("d0af")),r=i(n("54f8"));n("14d9"),n("a434"),n("d3b7"),n("ddb0"),n("99af"),n("caad6"),n("2532");var l=uni.vk,c={},s=l.addressUtil.getProvinces(),u={data:function(){return{province:s,checkProvinceList:[],tableData:[],choice:!0,updateProvinceBtn_index:0,updateProvinceBtn_flag:!1,updateProvinceBtn_arr:[],loading:!1,data:{},table1:{action:"admin/business/sys.freight.getList",columns:[{key:"name",title:"运费模板名称",type:"text",minWidth:200},{key:"max_weight",title:"拆包重量",type:"number",width:100,defaultValue:"不拆包"},{key:"comment",title:"备注",type:"text",minWidth:200},{key:"is_default",title:"是否默认",type:"switch",activeValue:!0,inactiveValue:!1},{key:"freight_rules",title:"运费规则",type:"table",minWidth:200,show:["detail"],maxHeight:600,columns:[{key:"province_names",title:"省列表",type:"text",minWidth:200,align:"left"},{key:"first_weight",title:"首重（KG）",type:"text",width:80},{key:"first_weight_price",title:"首重价格（元）",type:"money",width:80},{key:"continuous_weight",title:"续重（KG）",type:"text",width:80},{key:"continuous_weight_price",title:"续重价格（元）",type:"money",width:80}]}],multipleSelection:[],selectItem:""},queryForm1:{formData:{},columns:[{key:"name",title:"运费模板名称",type:"text",mode:"%%"}]},form1:{max_weight:"",comment:"",freight_rules:[]},formData1:{action:"",columns:[{key:"name",title:"运费模板名称",type:"text"},{key:"max_weight",title:"拆包重量",type:"number",placeholder:"请输入拆包重量（KG）",tips:"如拆包重量为5KG，订单包裹重量5.1KG，则要付2次首重的费用（相当于发2个包裹）。若订单包裹重量10.1KG，则要付3次首重的费用（相当于发3个包裹），填0或不填则1个订单只计算1次首重费用。"},{key:"comment",title:"运费模板备注",type:"text",placeholder:"请输入运费模板备注"},{key:"freight_rules",title:"",type:"text",data:s,showLabel:!1},{key:"is_default",title:"是否默认",type:"switch",activeValue:!0,inactiveValue:!1,tips:"是否设为默认运费模板"}],rules:{name:[{required:!0,message:"该项必填",trigger:["blur","change"]}]},formType:"",show:!1},formData2:{columns:[{key:"max_weight",title:"拆包重量",type:"number",placeholder:"请输入拆包重量（KG）"}],show:!1}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=this,l=a.vk,a.options=e,a.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){c["form1"]=l.pubfn.copyObject(a.form1)},pageTo:function(e){l.navigateTo(e)},resetForm:function(){l.pubfn.resetForm(c,a)},search:function(){a.$refs.table1.query()},refresh:function(){a.$refs.table1.refresh()},getCurrentRow:function(){return a.$refs.table1.getCurrentRow()},currentChange:function(e){a.table1.selectItem=e},selectionChange:function(e){a.table1.multipleSelection=e},addBtn:function(){a.resetForm(),a.formData1.action="admin/business/sys.freight.addUpdate",a.formData1.formType="add",a.formData1.title="添加",a.formData1.show=!0},updateBtn:function(e){var t=e.item;a.formData1.action="admin/business/sys.freight.addUpdate",a.formData1.formType="update",a.formData1.title="编辑",a.formData1.show=!0,a.form1=t},deleteBtn:function(e){var t=e.item,n=e.deleteFn;n({action:"admin/business/sys.freight.delete",data:{_id:t._id}})},select_province:function(){a.formData2.show=!0},selectProvinceSubmit:function(){var e=a,t=e.checkProvinceList,n=t,i=[];for(var o in n){var r=l.pubfn.getListItem(s,"code",n[o]);i.push(r.name)}if(this.updateProvinceBtn_flag){var c=a.form1.freight_rules[this.updateProvinceBtn_index];c.province_codes=n,c.province_names=i,this.updateProvinceBtn_flag=!1}else n.length&&a.form1.freight_rules.push({province_codes:n,province_names:i,first_weight:1,first_weight_price:"",continuous_weight:1,continuous_weight_price:""});a.checkProvinceList=[],a.formData2.show=!1},updateProvinceBtn:function(e,t){this.updateProvinceBtn_flag=!0,this.updateProvinceBtn_index=t,a.checkProvinceList=e.province_codes,a.formData2.show=!0},deleteProvinceBtn:function(e){a.form1.freight_rules.splice(e,1)},formSuccess:function(){a.formData1.show=!1,a.refresh()}},watch:{},filters:{disabled_list:function(e){var t=a.form1.freight_rules,n=a.updateProvinceBtn_flag,i=a.updateProvinceBtn_index;if(t.length){var l=[];if(n){var c,s=(0,r.default)(t.entries());try{for(s.s();!(c=s.n()).done;){var u=(0,o.default)(c.value,2),f=u[0],d=u[1];f!=i&&(l=l.concat(d.province_codes))}}catch(b){s.e(b)}finally{s.f()}}else{var p,m=(0,r.default)(t.entries());try{for(m.s();!(p=m.n()).done;){var h=(0,o.default)(p.value,2),v=(h[0],h[1]);l=l.concat(v.province_codes)}}catch(b){m.e(b)}finally{m.f()}}return l.includes(e)}return!1}},computed:{checkedProvinceCom:function(){var e=a.form1.freight_rules,t=[];for(var n in e)t=t.concat(e[n].province_codes);return t},submit_disabled:function(){var e=a.form1.freight_rules;return!e.length||e.some((function(e,t,n){return!l.pubfn.isNotNullAll(e.first_weight_price,e.continuous_weight_price)}))}}};t.default=u}}]);