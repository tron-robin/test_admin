(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-setting"],{"025e":function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d"),a("14d9"),a("a9e3");var o=uni.vk,i={data:function(){return{data:{},page:{title:"交易设置",submitText:"设置",cancelText:"返回",showBack:!1,backPage:"",loading:!1},form1:{data:{order:{auto_cancel:"",plan_send:"",auto_confirm_receive:"",auto_complete:"",receive_tips:"",complete_tips:"",cancel_tips:""},order_refund:{status:0,max_amount:"",max_month_count:""},refund_address:{name:"",mobile:"",address:{},address_detail:"",remark:""}},props:{action:"admin/business/sys.order.updateOrderSetting",columns:[{key:"",title:"订单相关",type:"bar-title"},{key:"order",title:"订单超时时间，单位分钟",type:"text",showLabel:!1}],rules:{},labelWidth:"100px"}},goodsSelect:{action:"admin/business/sys.goods.getList",multiple:!0,formData:{status:0},columns:[{key:"goods_thumb",title:"商品图",type:"avatar",imageWidth:40},{key:"name",title:"商品名称",type:"text",width:160,align:"left"},{key:"categoryList",title:"所属分类",type:"text",width:140,defaultValue:"暂无",formatter:function(e,t,a,n){var o="";return e.map((function(e,t){t>0&&(o+="、"),o+=e.name})),o}},{key:"sku_list",title:"价格区间",type:"text",width:200,defaultValue:"暂无",formatter:function(e,t,a,n){var i=[];e.map((function(e,t){i.push(Number(e.price))}));var r=Math.max.apply(Math,i),s=Math.min.apply(Math,i);return r!=s?o.pubfn.priceFilter(s)+" - "+o.pubfn.priceFilter(r):o.pubfn.priceFilter(s)}},{key:"stock",title:"商品库存",type:"number",width:110,show:["row"]}],queryColumns:[{key:"name",type:"text",title:"商品名称",placeholder:"请输入商品名称",width:220,mode:"%%"},{key:"category_ids",title:"商品分类",type:"cascader",width:250,mode:"in",action:"admin/business/sys.goodsCategory.kh_getList",props:{list:"rows",value:"_id",label:"name",children:"children",checkStrictly:!0,emitPath:!1}},{key:"_id",title:"角色标识",type:"text",width:150,mode:"%%",show:!1}]}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=this,o=n.vk,n.options=e,n.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){o.callFunction({url:"client/pub.getMchInfo",loading:{name:"page.loading",that:n},data:{},success:function(e){o.setVuex("$user.mchInfo",e.mchInfo),o.pubfn.objectAssign(n.form1.data.order,e.mchInfo.order),o.pubfn.objectAssign(n.form1.data.order_refund,e.mchInfo.order_refund),o.pubfn.objectAssign(n.form1.data.refund_address,e.mchInfo.refund_address)}})},pageTo:function(e){o.navigateTo(e)},pageBack:function(){var e=getCurrentPages();e.length>1&&e[0].route!==n.$page.route?o.navigateBack():n.page.backPage&&o.navigateTo(n.page.backPage)},resetForm:function(){n.$refs.form1.resetForm()},submitForm:function(){n.$refs.form1.submitForm()},formSuccess:function(e){}},watch:{},computed:{}};t.default=i},"19c3":function(e,t,a){"use strict";a.r(t);var n=a("2dc2"),o=a("a3d9");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var r=a("f0c5"),s=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"0b3544e3",null,!1,n["a"],void 0);t["default"]=s.exports},"2dc2":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("vk-data-page-header",{attrs:{title:e.page.title,"show-back":e.page.showBack},on:{back:function(t){arguments[0]=t=e.$handleEvent(t),e.pageBack.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"page-body"},[a("vk-data-form",{directives:[{name:"loading",rawName:"v-loading",value:e.page.loading,expression:"page.loading"}],ref:"form1",attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"footer-show":!1,size:"small"},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.formSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"order",fn:function(t){t.form,t.keyName;return[a("v-uni-view",{staticStyle:{"line-height":"60px",color:"#606266","font-size":"14px"}},[a("v-uni-view",{staticStyle:{"margin-left":"85px"}},[a("v-uni-view",[a("v-uni-text",[e._v("下单后，超过")]),a("vk-data-input-number",{staticStyle:{margin:"0 10px"},attrs:{precision:0,min:1,max:1440,width:"100px",placeholder:"多少",size:"small"},model:{value:e.form1.data.order.auto_cancel,callback:function(t){e.$set(e.form1.data.order,"auto_cancel",t)},expression:"form1.data.order.auto_cancel"}}),a("v-uni-text",[e._v("分钟未付款，系统自动取消订单。")])],1)],1)],1)]}},{key:"order_refund",fn:function(t){t.form,t.keyName;return[a("v-uni-view",{staticStyle:{"line-height":"60px",color:"#606266","font-size":"14px"}},[a("v-uni-view",{staticStyle:{"margin-left":"85px"}},[a("v-uni-view",{staticStyle:{"font-weight":"bold"}},[e._v("用户主动申请退款的订单状态条件。")]),a("v-uni-view",[a("v-uni-text",[e._v("订单的状态必须为")]),a("vk-data-input-select",{staticStyle:{margin:"0 10px"},attrs:{localdata:[{value:0,label:"已付款且未发货"},{value:1,label:"已付款且未确认收货"},{value:2,label:"已付款且未评价"}],width:"180px",clearable:!1,placeholder:"请选择"},model:{value:e.form1.data.order_refund.status,callback:function(t){e.$set(e.form1.data.order_refund,"status",t)},expression:"form1.data.order_refund.status"}}),a("v-uni-text",[e._v("时，用户才能申请退款。")])],1),a("v-uni-view",{staticStyle:{"font-weight":"bold"}},[e._v("以下是当订单【已付款且未发货】时，用户申请退款，系统自动审核通过的条件，需全部满足，不填则忽略此条件。如都不填，则代表必须人工审核")]),a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[a("v-uni-text",[e._v("条件1：订单付款金额在")]),a("vk-data-input-money",{staticStyle:{margin:"0 10px"},attrs:{precision:2,width:"140px",placeholder:"多少",size:"small",rightText:"元"},model:{value:e.form1.data.order_refund.max_amount,callback:function(t){e.$set(e.form1.data.order_refund,"max_amount",t)},expression:"form1.data.order_refund.max_amount"}}),a("v-uni-text",[e._v("内。")])],1),a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[a("v-uni-text",[e._v("条件2：本月累计退款次数在")]),a("vk-data-input-number",{staticStyle:{margin:"0 10px"},attrs:{precision:0,width:"140px",placeholder:"多少",size:"small",rightText:"次"},model:{value:e.form1.data.order_refund.max_month_count,callback:function(t){e.$set(e.form1.data.order_refund,"max_month_count",t)},expression:"form1.data.order_refund.max_month_count"}}),a("v-uni-text",[e._v("内。")])],1),a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[a("v-uni-text",{staticStyle:{"margin-right":"10px"}},[e._v("条件3：订单中不包含以下任意商品")]),a("vk-data-input-table-select",{attrs:{action:e.goodsSelect.action,"form-data":e.goodsSelect.formData,columns:e.goodsSelect.columns,multiple:e.goodsSelect.multiple,queryColumns:e.goodsSelect.queryColumns,placeholder:"请选择"},model:{value:e.form1.data.order_refund.nin_goods_ids,callback:function(t){e.$set(e.form1.data.order_refund,"nin_goods_ids",t)},expression:"form1.data.order_refund.nin_goods_ids"}})],1)],1)],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1),a("v-uni-view",{staticClass:"page-footer"},[e.page.showBack?a("el-button",{staticStyle:{"margin-right":"20px",width:"80px"},attrs:{plain:!0,loading:e.form1.props.loading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pageBack.apply(void 0,arguments)}}},[e._v(e._s(e.page.cancelText))]):e._e(),a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:e.form1.props.loading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v(e._s(e.page.submitText))])],1),a("v-uni-view",{staticClass:"page-dialog"})],1)},o=[]},a3d9:function(e,t,a){"use strict";a.r(t);var n=a("025e"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a}}]);