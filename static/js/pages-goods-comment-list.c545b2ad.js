(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-comment-list"],{"032b":function(t,e,a){"use strict";a.r(e);var n=a("3976"),i=a("0d1a0");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("baa8");var s=a("f0c5"),l=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"0066e903",null,!1,n["a"],void 0);e["default"]=l.exports},"0d1a0":function(t,e,a){"use strict";a.r(e);var n=a("bef3"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},3976:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page-body"},[a("vk-data-table-query",{attrs:{columns:t.queryForm1.columns,size:"mini"},on:{search:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.queryForm1.formData,callback:function(e){t.$set(t.queryForm1,"formData",e)},expression:"queryForm1.formData"}}),a("v-uni-view",[a("el-row",[t.table1.multipleSelection?a("el-dropdown",{attrs:{"split-button":!1,trigger:"click"},on:{command:function(e){arguments[0]=e=t.$handleEvent(e),t.batchBtn.apply(void 0,arguments)}}},[a("el-button",{staticStyle:{"margin-left":"20rpx"},attrs:{type:"danger",size:"small",disabled:0===t.table1.multipleSelection.length}},[t._v("批量操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:1}},[t._v("批量审核通过")]),a("el-dropdown-item",{attrs:{command:2}},[t._v("批量审核拒绝")])],1)],1):t._e()],1)],1),a("vk-data-table",{ref:"table1",attrs:{action:t.table1.action,columns:t.table1.columns,"query-form-param":t.queryForm1,"right-btns":["detail_auto","delete"],"custom-right-btns":t.table1.customeRightBtns,size:"mini","row-no":!0,pagination:!0,selection:!0},on:{delete:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteBtn.apply(void 0,arguments)},"current-change":function(e){arguments[0]=e=t.$handleEvent(e),t.currentChange.apply(void 0,arguments)},"selection-change":function(e){arguments[0]=e=t.$handleEvent(e),t.selectionChange.apply(void 0,arguments)},"custom-right-btns":function(e){arguments[0]=e=t.$handleEvent(e),t.customRightBtns.apply(void 0,arguments)}}}),a("vk-data-dialog",{attrs:{title:t.formData1.title,width:"500px",mode:"form"},model:{value:t.formData1.show,callback:function(e){t.$set(t.formData1,"show",e)},expression:"formData1.show"}},[a("vk-data-form",{attrs:{rules:t.formData1.rules,action:t.formData1.action,"form-type":t.formData1.formType,columns:t.formData1.columns,"label-width":"90px"},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.examineSuccess.apply(void 0,arguments)}},model:{value:t.form1,callback:function(e){t.form1=e},expression:"form1"}},[a("template",{slot:"content"},[a("v-uni-view",[t.form1.user_info?a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[a("el-image",{staticClass:"image-avatar",attrs:{src:t.form1.user_info.avatar,fit:"cover"}}),a("v-uni-view",{staticStyle:{"margin-left":"8px"}},[t._v(t._s(t.form1.user_info.nickname)+" :")])],1):t._e(),a("v-uni-view",{staticStyle:{"line-height":"1.5"}},[t._v(t._s(t.form1.content))])],1)],1)],2)],1)],1)},i=[]},94840:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"",""]),t.exports=e},baa8:function(t,e,a){"use strict";var n=a("dd14"),i=a.n(n);i.a},bef3:function(t,e,a){"use strict";var n;a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d81d"),a("14d9");var i=uni.vk,o={},s={data:function(){return{loading:!1,data:{},table1:{action:"admin/business/sys.goodsComment.getList",columns:[{key:"goods_name",title:"活动名称",type:"text",minWidth:180},{key:"status",title:"评价状态",type:"tag",width:90,size:"small",data:[{value:-1,label:"审核拒绝",tagType:"danger"},{value:0,label:"待审核",tagType:"info"},{value:1,label:"审核通过",tagType:"success"}]},{key:"user_info",title:"评价者",type:"userInfo",minWidth:90},{key:"content",title:"评价内容",type:"text",minWidth:290},{key:"images",title:"图片",type:"image",width:160},{key:"stars",title:"评分",type:"number",width:120},{key:"_add_time",title:"添加时间",type:"time",width:150,sortable:"custom"}],multipleSelection:[],selectItem:"",customeRightBtns:[{title:"审核",type:"primary",icon:"el-icon-edit",show:function(t){return 0==t.status}}]},queryForm1:{formData:{goods_id:""},columns:[{key:"user_id",title:"用户ID",type:"remote-select",placeholder:"请输入用户ID",width:140,action:"admin/select/kh/user"},{key:"status",title:"评价状态",type:"select",width:140,data:[{value:-1,label:"审核拒绝"},{value:0,label:"待审核"},{value:1,label:"审核通过"}]},{key:"goods_id",title:"活动",type:"table-select",placeholder:"选择活动",fieldName:"goods_id",action:"admin/business/sys.goods.getList",mode:"=",formData:{status:0},columns:[{key:"goods_thumb",title:"活动展示图",type:"avatar",imageWidth:40},{key:"name",title:"活动名称",type:"text",width:160,align:"left"},{key:"categoryList",title:"所属分类",type:"text",width:140,defaultValue:"暂无",formatter:function(t,e,a,n){var i="";return t.map((function(t,e){e>0&&(i+="、"),i+=t.name})),i}},{key:"stock",title:"商品库存",type:"number",width:110,show:["row"]}],queryColumns:[{key:"name",type:"text",title:"活动名称",placeholder:"活动名称",width:220,mode:"%%"},{key:"category_ids",title:"分类",type:"cascader",width:250,mode:"in",action:"admin/business/sys.goodsCategory.kh_getList",props:{list:"rows",value:"_id",label:"name",children:"children",checkStrictly:!0,emitPath:!1}},{key:"_id",title:"标识",type:"text",width:150,mode:"=",show:!1}]},{key:"user_nickname",title:"评价者昵称",type:"text",mode:"%%",width:140,fieldName:"user_info.nickname"},{key:"content",title:"评价内容",type:"text",mode:"%%",width:140},{key:"_add_time",title:"添加时间",type:"datetimerange",width:340}]},form1:{},formData1:{title:"审核",action:"admin/business/sys.goodsComment.update",columns:[{key:"goods_name",title:"商品名称",type:"text-view"},{key:"content",title:"评价内容",type:"text-view"},{key:"images",title:"图片",type:"image",disabled:!0},{key:"status",title:"状态",type:"radio",data:[{value:-1,label:"审核拒绝"},{value:0,label:"待审核"},{value:1,label:"审核通过"}]}],rules:{status:[{required:!0,message:"状态不能为空",trigger:"blur"},{type:"number",message:"状态必须是数字",trigger:"blur"}]},formType:"update",show:!1}}},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=this,i=n.vk,n.options=t,n.init(t)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(t){o["form1"]=i.pubfn.copyObject(n.form1),t._id&&(n.queryForm1.formData.goods_id=t._id)},pageTo:function(t){i.navigateTo(t)},pageBack:function(t){var e=getCurrentPages();e.length>1&&e[0].route!==n.$page.route?i.navigateBack():t&&i.navigateTo(t)},resetForm:function(){i.pubfn.resetForm(o,n)},search:function(){n.$refs.table1.query()},refresh:function(){n.$refs.table1.refresh()},getCurrentRow:function(t){return n.$refs.table1.getCurrentRow(t)},currentChange:function(t){n.table1.selectItem=t},selectionChange:function(t){n.table1.multipleSelection=t},deleteBtn:function(t){var e=t.item,a=t.deleteFn;a({action:"admin/business/sys.goodsComment.delete",data:{_id:e._id}})},customRightBtns:function(t,e){"审核"===e.title&&n.examine(t)},examine:function(t){n.formData1.show=!0,n.form1=t},examineSuccess:function(t){var e=t.data,a=n.getCurrentRow(!0);n.formData1.show=!1,a.status=e.status},batchBtn:function(t){switch(t){case 1:n.batchAudit(1);break;case 2:n.batchAudit(-1);break;default:break}},batchAudit:function(t){var e=[];n.table1.multipleSelection.map((function(t,a){e.push(t._id)}));var a={ids:e,status:t};i.callFunction({url:"admin/business/sys.goodsComment.update",title:"请求中...",data:a,success:function(t){n.$notify({message:"批量操作成功!",type:"success"}),n.refresh()}})}},watch:{},computed:{}};e.default=s},dd14:function(t,e,a){var n=a("94840");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("5ebe9ef4",n,!0,{sourceMap:!1,shadowMode:!1})}}]);