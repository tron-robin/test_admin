(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-vip-setting"],{"7ed6":function(e,t,a){"use strict";a.r(t);var i=a("9408"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},9408:function(e,t,a){"use strict";var i;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d"),a("14d9"),a("a9e3");var n=uni.vk,o={data:function(){return{data:{},loading:!1,page:{title:"会员等级",submitText:"设置",cancelText:"返回",showBack:!1,backPage:""},form1:{data:{},props:{action:"admin/business/sys.mch.updateVipLevelRule",columns:[{key:"vip_level_rule",title:"",type:"array<object>",showLabel:!1,size:"small",showAdd:!0,showClear:!1,showSort:!1,defaultValue:{name:"",discount:"",total_recharge_amount:"",total_order_amount:"",is_free_shipping:!1,free_shipping_min_order_amount:"",integral_ratio:1},maxlength:10,rightBtns:[{mode:"delete",title:"删除",show:function(e,t){return t>0}}],columnIndexMethod:function(e){var t="Lv.".concat(e);return t},columns:[{key:"name",title:"等级名称",type:"text",width:160,clearable:!1,placeholder:"输入等级名称",disabled:"lv==0",isUnique:!0,rules:[{required:!0,message:"该项不能为空",trigger:["change","blur"]},{min:1,max:8,message:"长度在 1 到 8 个字符",trigger:["change","blur"]}]},{key:"discount",title:"会员折扣",type:"discount",placeholder:"输入折扣",width:160,incMode:-2,clearable:!1,rules:[{required:!0,message:"该项不能为空",trigger:["change","blur"]}]},{key:"total_recharge_amount",title:"条件1：累计充值余额",type:"money",width:150,placeholder:"输入金额",incMode:1,clearable:!1,disabled:"lv==0"},{key:"total_order_amount",title:"条件2：累计订单金额",type:"money",width:150,placeholder:"输入金额",incMode:1,clearable:!1,disabled:"lv==0"},{key:"goods_ids",title:"条件3：购买指定商品任意一个",type:"table-select",placeholder:"选择商品",action:"admin/business/sys.goods.getList",multiple:!0,labelFormat:"已选{{length}}个商品",formData:{status:0},columns:[{key:"goods_thumb",title:"商品图",type:"avatar",imageWidth:40},{key:"name",title:"商品名称",type:"text",width:160,align:"left"},{key:"categoryList",title:"所属分类",type:"text",width:140,defaultValue:"暂无",formatter:function(e,t,a,i){var n="";return e.map((function(e,t){t>0&&(n+="、"),n+=e.name})),n}},{key:"sku_list",title:"价格区间",type:"text",width:200,defaultValue:"暂无",formatter:function(e,t,a,i){var o=[];e.map((function(e,t){o.push(Number(e.price))}));var r=Math.max.apply(Math,o),l=Math.min.apply(Math,o);return r!=l?n.pubfn.priceFilter(l)+" - "+n.pubfn.priceFilter(r):n.pubfn.priceFilter(l)}},{key:"stock",title:"商品库存",type:"number",width:110,show:["row"]}],queryColumns:[{key:"name",type:"text",title:"商品名称",placeholder:"请输入商品名称",width:220,mode:"%%"},{key:"category_ids",title:"商品分类",type:"cascader",width:250,mode:"in",action:"admin/business/sys.goodsCategory.kh_getList",props:{list:"rows",value:"_id",label:"name",children:"children",checkStrictly:!0,emitPath:!1}},{key:"_id",title:"商品标识",type:"text",width:150,mode:"=",show:!1}],showRule:"lv!=0"},{key:"is_free_shipping",title:"是否包邮",type:"switch",width:80},{key:"free_shipping_min_order_amount",title:"包邮最低金额",type:"money",width:150,clearable:!1,placeholder:"输入金额",disabled:function(e){return!e.is_free_shipping}},{key:"integral_ratio",title:"积分倍率",type:"number",width:150,clearable:!1,placeholder:"输入倍率"},{key:"custom_service",title:"会员权益",type:"array<object>",buttonText:"设置",dialog:!0,width:120,dialogWidth:700,showRule:"lv!=0",size:"small",showAdd:!0,showClear:!0,showSort:!1,maxlength:10,rowNo:!1,rightBtns:["delete"],defaultValue:{name:"",comment:""},columns:[{key:"name",title:"权益名称",type:"text",minWidth:100,clearable:!1,isUnique:!0,rules:[{required:!0,message:"该项不能为空",trigger:["change","blur"]},{min:1,max:8,message:"长度在 1 到 8 个字符",trigger:["change","blur"]}]},{key:"comment",title:"描述内容",type:"text",minWidth:150,clearable:!1}]}]}],rules:{},labelWidth:"100px"}}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,n=i.vk,i.options=e,i.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){var t=this;n.callFunction({url:"client/pub.getMchInfo",loading:!0,data:{},success:function(e){t.$refs.form1.setFormData(e.mchInfo)}})},pageTo:function(e){n.navigateTo(e)},pageBack:function(){var e=getCurrentPages();e.length>1&&e[0].route!==i.$page.route?n.navigateBack():i.page.backPage&&n.navigateTo(i.page.backPage)},resetForm:function(){i.$refs.form1.resetForm()},submitForm:function(){i.$refs.form1.submitForm()},formSuccess:function(e){n.setVuex("$user.mchInfo",e.data.info)}},watch:{},computed:{}};t.default=o},c7c35:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("vk-data-page-header",{attrs:{title:e.page.title,"show-back":e.page.showBack},on:{back:function(t){arguments[0]=t=e.$handleEvent(t),e.pageBack.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"page-body"},[a("v-uni-view",{staticStyle:{"margin-bottom":"10px"}},[a("v-uni-view",{staticClass:"tips"},[e._v("1、Lv.0 为用户一注册就拥有的等级，为非会员")]),a("v-uni-view",{staticClass:"tips"},[e._v("2、各条件之间满足任意一项，即可升级。")])],1),a("vk-data-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form1",attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"footer-show":!1},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.formSuccess.apply(void 0,arguments)}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1),a("v-uni-view",{staticClass:"page-footer"},[a("el-button",{staticStyle:{"margin-right":"20px",width:"80px"},attrs:{plain:!0,loading:e.form1.props.loading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.resetForm.apply(void 0,arguments)}}},[e._v("重置")]),a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:e.form1.props.loading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v(e._s(e.page.submitText))])],1),a("v-uni-view",{staticClass:"page-dialog"})],1)},n=[]},e4d9:function(e,t,a){"use strict";a.r(t);var i=a("c7c35"),n=a("7ed6");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);var r=a("f0c5"),l=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"19da56d2",null,!1,i["a"],void 0);t["default"]=l.exports}}]);