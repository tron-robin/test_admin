(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-recharge-order-list"],{"1d3e":function(e,t,n){"use strict";var a;n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=uni.vk,i={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"充值退款",submitText:"确定退款",cancelText:"关闭弹窗",showCancel:!0,top:"7vh",width:"400px"},form1:{data:{},props:{action:"admin/business/sys.orderRecharge.refund",columns:[{key:"info",title:"订单信息",type:"text",showLabel:!1},{key:"refund_amount",title:"退款金额",type:"money",max:"",clearable:!1},{key:"refund_desc",title:"退款描述",type:"textarea",autosize:{minRows:4,maxRows:10},maxlength:200,showWordLimit:!0}],rules:{},labelWidth:"80px"}}}},mounted:function(){a=this,a.init()},methods:{init:function(){var e=a,t=e.value;a.$emit("input",t)},onOpen:function(){a=this;var e=a.value.item,t=void 0===e?{}:e,n=t.payment_amount-t.refund_amount;a.form1.data={_id:t._id,refund_amount:n};var i=o.pubfn.getListItem(a.form1.props.columns,"key","refund_amount");i.max=o.pubfn.toDecimal(n/100,2)},onClose:function(){},onFormSuccess:function(){a.value.show=!1,a.$emit("success")}},watch:{},computed:{}};t.default=i},"2a88":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".info-label[data-v-9cc3acba]{width:80px;display:inline-block;padding-right:10px;text-align:right;-webkit-box-sizing:border-box;box-sizing:border-box}",""]),e.exports=t},"3c24":function(e,t,n){var a=n("f1ca");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("49190072",a,!0,{sourceMap:!1,shadowMode:!1})},"428e":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[n("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"info",fn:function(t){t.form,t.keyName;return[n("v-uni-view",[n("v-uni-view",[n("v-uni-text",{staticClass:"info-label"},[e._v("订单号")]),n("v-uni-text",{staticClass:"info-value"},[e._v(e._s(e.value.item.order_no))])],1),n("v-uni-view",[n("v-uni-text",{staticClass:"info-label"},[e._v("付款金额")]),n("v-uni-text",{staticClass:"info-value"},[e._v(e._s(e.vk.pubfn.priceFilter(e.value.item.payment_amount))+" 元")])],1),n("v-uni-view",[n("v-uni-text",{staticClass:"info-label"},[e._v("已退金额")]),n("v-uni-text",{staticClass:"info-value"},[e._v(e._s(e.vk.pubfn.priceFilter(e.value.item.refund_amount))+" 元")])],1),n("v-uni-view",[n("v-uni-text",{staticClass:"info-label"},[e._v("最大可退")]),n("v-uni-text",{staticClass:"info-value"},[e._v(e._s(e.vk.pubfn.priceFilter(e.value.item.payment_amount-e.value.item.refund_amount))+" 元")])],1)],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},"48da":function(e,t,n){"use strict";var a=n("7d96"),o=n.n(a);o.a},"68b0a":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page-body"},[n("vk-data-table-query",{attrs:{columns:e.queryForm1.columns,"main-columns":["status","order_no","transaction_id","nickname"]},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),n("v-uni-view",[n("el-row")],1),n("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":["detail_auto"],"custom-right-btns":e.table1.customRightBtns,"right-btns-align":"right",selection:!1,"row-no":!0,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),n("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"500px",mode:"form","close-on-click-modal":!0},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[n("vk-data-form",{attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"80px"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1),n("orderRefund",{on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.refresh.apply(void 0,arguments)}},model:{value:e.formDatas.orderRefund,callback:function(t){e.$set(e.formDatas,"orderRefund",t)},expression:"formDatas.orderRefund"}})],1)},o=[]},6933:function(e,t,n){"use strict";var a=n("3c24"),o=n.n(a);o.a},"7d96":function(e,t,n){var a=n("2a88");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("36c3371a",a,!0,{sourceMap:!1,shadowMode:!1})},b4e3:function(e,t,n){"use strict";n.r(t);var a=n("cf05"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},bc20:function(e,t,n){"use strict";n.r(t);var a=n("68b0a"),o=n("b4e3");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("6933");var r=n("f0c5"),l=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"76ecf45a",null,!1,a["a"],void 0);t["default"]=l.exports},ce98:function(e,t,n){"use strict";n.r(t);var a=n("428e"),o=n("f31d");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("48da");var r=n("f0c5"),l=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"9cc3acba",null,!1,a["a"],void 0);t["default"]=l.exports},cf05:function(e,t,n){"use strict";n("7a82");var a=n("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ac1f"),n("841c");var o,i=a(n("ce98")),r=uni.vk,l={},u={components:{orderRefund:i.default},data:function(){return{loading:!1,data:{},table1:{action:"admin/business/sys.orderRecharge.getList",columns:[{key:"status",title:"状态",type:"tag",width:90,size:"small",data:[{value:-1,label:"已退款",tagType:"danger"},{value:0,label:"未付款",tagType:"info"},{value:1,label:"已付款",tagType:"success"}]},{key:"payment_amount",title:"付款金额",type:"money",width:110},{key:"refund_amount",title:"退款金额",type:"money",width:110},{key:"pay_type",title:"付款方式",type:"select",width:90,defaultValue:"-",data:[{value:"wxpay",label:"微信"},{value:"alipay",label:"支付宝"},{value:"balance",label:"余额"},{value:"offline",label:"线下支付"},{value:"none",label:"无需支付"}]},{key:"buyer_info.avatar",title:"用户头像",type:"avatar",width:80},{key:"buyer_info.nickname",title:"用户昵称",type:"text",width:100},{key:"inviterUserInfo.avatar",title:"上级头像",type:"avatar",width:80},{key:"inviterUserInfo.nickname",title:"上级",type:"text",width:100,formatter:function(e,t,n,a){var o="归属系统";return t.inviterUserInfo&&(o=t.inviterUserInfo.nickname,t.inviterUserInfo.comment&&(o+="（".concat(t.inviterUserInfo.comment,"）"))),o}},{key:"order_no",title:"订单号",type:"text",width:200},{key:"transaction_id",title:"交易单号",type:"text",width:220},{key:"pay_time",title:"付款时间",type:"time",width:160,sortable:"custom"},{key:"refund_time",title:"退款时间",type:"time",width:160,sortable:"custom"},{key:"refund_list",title:"退款详情",type:"table",show:["detail"],width:200,rowHeight:50,columns:[{key:"refund_amount",title:"退款金额",type:"money",minWidth:120},{key:"refund_desc",title:"退款说明",type:"text",minWidth:120},{key:"refund_time",title:"退款时间",type:"time",minWidth:120},{key:"oper_nickname",title:"操作人",type:"text",minWidth:120}]}],multipleSelection:[],selectItem:"",customRightBtns:[{title:"退款",type:"danger",show:function(e){return 1===e.status},onClick:function(e){r.pubfn.openForm("orderRefund",{item:e})}}]},queryForm1:{formData:{},columns:[{key:"status",title:"状态",type:"select",width:120,mode:"=",data:[{value:-1,label:"已退款"},{value:0,label:"未付款"},{value:1,label:"已付款"}]},{key:"order_no",title:"订单号",type:"text",width:150,mode:"%%"},{key:"transaction_id",title:"交易单号",type:"text",width:150,mode:"%%"},{key:"nickname",title:"用户昵称",type:"text",width:150,mode:"%%",fieldName:"buyer_info.nickname"},{key:"pay_time",title:"付款时间",type:"datetimerange",width:360,mode:"[]"},{key:"refund_time",title:"退款时间",type:"datetimerange",width:360,mode:"[]"}]},form1:{data:{},props:{action:"",columns:[{key:"text",title:"金额",type:"text",placeholder:"请输入xxx"}],rules:{},formType:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o=this,r=o.vk,o.options=e,o.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){l["form1"]=r.pubfn.copyObject(o.form1)},pageTo:function(e){r.navigateTo(e)},resetForm:function(){r.pubfn.resetForm(l,o)},search:function(){o.$refs.table1.search()},refresh:function(){o.$refs.table1.refresh()},getCurrentRow:function(){return o.$refs.table1.getCurrentRow()},currentChange:function(e){o.table1.selectItem=e},selectionChange:function(e){o.table1.multipleSelection=e},addBtn:function(){o.resetForm(),o.form1.props.action="template/db_api/sys/add",o.form1.props.formType="add",o.form1.props.title="添加",o.form1.props.show=!0},updateBtn:function(e){var t=e.item;o.form1.props.action="template/db_api/sys/update",o.form1.props.formType="update",o.form1.props.title="编辑",o.form1.props.show=!0,o.form1.data=t},deleteBtn:function(e){var t=e.item,n=e.deleteFn;n({action:"template/db_api/sys/delete",data:{_id:t._id}})},batchBtn:function(e){switch(e){case 1:r.toast("批量操作按钮1");break;case 2:r.toast("批量操作按钮2");break;default:break}}},watch:{},computed:{}};t.default=u},f1ca:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,"",""]),e.exports=t},f31d:function(e,t,n){"use strict";n.r(t);var a=n("1d3e"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a}}]);