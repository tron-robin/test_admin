(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-app-platform-enterprise-weixin"],{"0107":function(e,t,a){"use strict";a.r(t);var n=a("2b6f"),o=a("ff48");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"74513a14",null,!1,n["a"],void 0);t["default"]=r.exports},"076a":function(e,t,a){var n=a("989e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a("4f06").default;o("31b37ef3",n,!0,{sourceMap:!1,shadowMode:!1})},"0c7c":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={vkDataQrcode:a("3710").default},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,center:!0},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{staticStyle:{width:"80px"},attrs:{loading:e.page.loading,type:"primary",size:"medium"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[e._v(e._s(e.page.submitText))])]},proxy:!0}]),model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-flow":"column"}},[a("v-uni-view",[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-radio-button",{attrs:{label:"微信小程序推广码"}}),a("el-radio-button",{attrs:{label:"h5推广码"}})],1)],1),e.value.qrcode&&e.value.show?a("v-uni-view",{staticStyle:{"margin-top":"20px"}},["微信小程序推广码"===e.activeName?a("v-uni-image",{staticStyle:{width:"300px"},attrs:{src:e.value.qrcode,mode:"widthFix"}}):"h5推广码"===e.activeName?a("vk-data-qrcode",{attrs:{text:e.value.url,size:400}}):e._e()],1):e._e()],1)],1)},i=[]},"0db4":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText,"auto-close":!1,"max-height":"82vh"},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"userInfo",fn:function(t){t.form,t.keyName;return[a("v-uni-view",[a("v-uni-view",[a("el-avatar",{attrs:{size:20,src:e.userInfo.avatar}}),a("v-uni-text",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.userInfo.nickname))])],1),a("v-uni-view",[e._v("余额："+e._s(e.vk.pubfn.priceFilter(e.userInfo.balance))+" 元")])],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},"133a":function(e,t,a){"use strict";a.r(t);var n=a("75cf9"),o=a("c6f9");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"8add9580",null,!1,n["a"],void 0);t["default"]=r.exports},"13cd":function(e,t,a){"use strict";a("7a82");var n=a("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3"),a("d3b7"),a("159b"),a("ac1f"),a("841c");var o,i=n(a("e087")),l=n(a("83588")),r=n(a("a309")),u=n(a("a1ce")),s=n(a("6c7e")),c=n(a("4610")),d=n(a("0107")),f=n(a("c919")),p=n(a("133a")),m=n(a("af39")),v=uni.vk,h={},g=[{value:0,label:"正常",tagType:"success"},{value:1,label:"禁用",tagType:"danger"},{value:-10,label:"已注销",tagType:"info"}],b=(v.getVuex("$user.mchInfo.fx.level_rule"),v.getVuex("$user.mchInfo.vip_level_rule"),{components:{updateInviter:i.default,userTags:l.default,isServiceStaff:r.default,isVerifyStaff:u.default,applyqrcode:s.default,userTagscom:c.default,updateFxLv:d.default,balance:f.default,integral:p.default,balanceTransfer:m.default},data:function(){return{dialog:{show1:!1},userlist:{},corpid:"ww7fb6d9fca4dbcf1e",corpsecret:"DwbORl6PyCm3I9V3xLxqbvBzyTJC1pytSEZ3PY75FOU",token:"",loading:!1,data:{},table1:{action:"admin/business/sys.user.getLeaderList",columns:[{key:"register_date",title:"账号信息",type:"group",width:180,align:"left",sortable:"custom",columns:[{key:"_id",title:"id",type:"text",width:300},{key:"qywechat_id",title:"企业微信",type:"text",width:160,defaultValue:"未绑定"},{key:"username",title:"账号",type:"text",width:160,defaultValue:"未设置"},{key:"register_date",title:"注册",type:"time",width:160,sortable:"custom"},{key:"status",title:"状态",type:"tag",width:120,defaultValue:0,data:g}]},{key:"avatar",title:"头像",type:"avatar",width:80,imageWidth:40,shape:"square"},{key:"mobile",title:"用户信息",type:"group",width:180,align:"left",columns:[{key:"nickname",title:"昵称",type:"text",width:120},{key:"mobile",title:"手机",type:"text",width:120,defaultValue:"未绑定",formatter:function(e,t,a,n){if(-10==t.status){var o=e?e.split("_")[0]:e;return o}return e}}]},{key:"is_leader",title:"是否为领队",type:"tag",width:120,data:[{value:2,label:"领队",tagType:"primary"},{value:1,label:"非领队",tagType:"success"}]}],multipleSelection:[],selectItem:"",customRightBtns:[{title:"绑定企业微信",type:"success",icon:"el-icon-edit",onClick:function(e){setTimeout((function(){o.getContacts(e._id)}),10)}}]},queryForm1:{formData:{_id:"",is_fx:"",is_leader:2}},form2:{data:{_id:"",qy_id:""},props:{action:"admin/business/sys.user.bindQyWechat",columns:[{key:"userid",title:"select类型",type:"select",data:[]}]}},form1:{data:{},props:{action:"",columns:[{key:"_id",title:"ID",type:"text"},{key:"is_leader",title:"是否为领队",type:"tag",width:120,data:[{value:2,label:"领队",tagType:"primary"}]},{key:"nickname",title:"昵称",type:"text"},{key:"mobile",title:"手机号",type:"text"},{key:"key1",title:"标题",type:"text",width:200,buttonsPosition:"right",buttons:[{title:"修改",type:"text",mode:"update",show:["row"],showRule:function(e){return 1!=e.key2},click:function(e){console.log(1,e.value,e.formData),v.callFunction({url:"template/test/pub/test",data:e.formData,success:function(t){e.success({msg:"修改成功"})}})}}]}],rules:{nickname:[{required:!0,message:"昵称为必填字段",trigger:"blur"},{min:2,max:20,message:"昵称长度在 2 到 20 之间",trigger:"blur"}],mobile:[{required:!0,validator:v.pubfn.validator("mobile"),message:"手机号格式错误",trigger:"blur"}]},formType:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o=this,v=o.vk,o.options=e,o.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){h["form1"]=v.pubfn.copyObject(o.form1),h["queryForm1.formData"]=v.pubfn.copyObject(o.queryForm1.formData),e._id&&(o.queryForm1.formData._id=e._id),e.is_fx?(o.queryForm1.formData.is_fx=Number(e.is_fx),uni.setNavigationBarTitle({title:"分销员管理"})):uni.setNavigationBarTitle({title:"用户管理"}),v.getVuex("$user.mchInfo.fx.level_rule"),v.getVuex("$user.mchInfo.vip_level_rule")},getAccessToken:function(){if(uni.getStorage({key:"qy_access_token",success:function(e){var t=(new Date).getTime();console.log(t),e.data.expire_time>t?(console.log("还没过期"),this.token=e.data.token):console.log("过期了")},fail:function(e){console.log("fail")}}),""==this.token){var e=this.corpid,t=this.corpsecret,a=this;v.callFunction({url:"admin/platform/enterpriseWechat/enterpriseWechat.getQyAccessToken",data:{corpid:e,corpsecret:t},success:function(e){a.token=e.accessToken;var t=(new Date).getTime();uni.setStorage({key:"qy_access_token",data:{token:e.accessToken,expire_time:t+7199e3},success:function(e){},fail:function(e){console.log("我没有")}})}})}},getContacts:function(e){this.getAccessToken(),setTimeout((function(){var t=this,a=o.token;console.log(a),v.callFunction({url:"admin/platform/enterpriseWechat/enterpriseWechat.getQyContacts",data:{token:a},success:function(a){t.userlist=a.userlist,t.userlist.forEach((function(e){e.value=e.userid,e.label=e.name,console.log("item",e)})),console.log("_id",e),o.form2.props.columns=[{key:"qy_id",title:"企业微信昵称",type:"select",data:t.userlist}],o.dialog.show1=!0,o.form2.data._id=e,console.log("data",o.form2.data)}})}),1e3)},pageTo:function(e){v.navigateTo(e)},resetForm:function(){o.form1=v.pubfn.copyObject(h["form1"])},search:function(){o.$refs.table1.search()},refresh:function(){o.$refs.table1.refresh()},getCurrentRow:function(){return o.$refs.table1.getCurrentRow()},currentChange:function(e){o.table1.selectItem=e},selectionChange:function(e){o.table1.multipleSelection=e},updateBtn:function(e){e.item;console.log("1111")}},watch:{},computed:{}});t.default=b},"1b41":function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=uni.vk,i={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"修改分销等级",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"14vh",width:"500px"},form1:{data:{},props:{action:"admin/business/sys.user.updateFxLv",columns:[{key:"is_fx",title:"是否是分销员",type:"radio",optionType:"button",data:[{value:1,label:"是"},{value:0,label:"否"}]},{key:"lv",title:"分销等级",type:"select",clearable:!1,data:function(){return o.getVuex("$user.mchInfo.fx.level_rule")},props:{value:"lv",label:"name"},showRule:"is_fx==1"}],rules:{},labelWidth:"100px"}}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e;n.form1.data={_id:t._id,is_fx:t.fx.is_fx,lv:t.fx.lv}},onClose:function(){},onFormSuccess:function(){n.$set(n.value.item.fx,"is_fx",n.form1.data.is_fx),n.$set(n.value.item.fx,"lv",n.form1.data.lv),n.value.show=!1,n.$emit("success")}},watch:{},computed:{}};t.default=i},"1ced":function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;uni.vk;var o={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:"",options:"",qrcode:"",url:""}}}},data:function(){return{page:{title:"申请二维码",submitText:"关闭",top:"7vh",width:"800px",loading:!1},qrcode:"",activeName:"微信小程序推广码"}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n._input(t)},_input:function(e){n.$emit("input",e)},onOpen:function(){n=this;var e=n,t=e.value,a=void 0===t?{}:t;a.item},onClose:function(){},open:function(){var e=n,t=e.value;t.show=!0,n._input(t)},close:function(){var e=n,t=e.value;t.show=!1,n._input(t)}},watch:{},computed:{}};t.default=o},"1e3e":function(e,t,a){"use strict";a.r(t);var n=a("13cd"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},2160:function(e,t,a){"use strict";var n=a("7948c"),o=a.n(n);o.a},"2b6f":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},3462:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".el-tag[data-v-3aca5ed3]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.el-tag + .el-tag[data-v-3aca5ed3]{margin-left:10px}.button-new-tag[data-v-3aca5ed3]{margin-left:10px;height:32px;line-height:30px;padding-top:0;padding-bottom:0}.input-new-tag[data-v-3aca5ed3]{width:90px;margin-left:10px;vertical-align:bottom}",""]),e.exports=t},3621:function(e,t,a){"use strict";a.r(t);var n=a("c886"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},"3c25":function(e,t,a){"use strict";a.r(t);var n=a("cea3"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},4610:function(e,t,a){"use strict";a.r(t);var n=a("c369"),o=a("806a");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a("a59b");var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"08e00b87",null,!1,n["a"],void 0);t["default"]=r.exports},4793:function(e,t,a){var n=a("db67");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a("4f06").default;o("2fe04492",n,!0,{sourceMap:!1,shadowMode:!1})},"48bc":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{staticStyle:{width:"80px"},attrs:{loading:e.page.btnLoading,size:"small"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[e._v("取消")]),a("el-button",{staticStyle:{width:"80px"},attrs:{loading:e.page.btnLoading,type:"primary",size:"small"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("保存")])]},proxy:!0}]),model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("v-uni-view",{directives:[{name:"loading",rawName:"v-loading",value:e.page.loading,expression:"page.loading"}],staticStyle:{padding:"20px"}},[e.value.show?a("userTagscom",{attrs:{userInfo:e.value.item},model:{value:e.form1.tags,callback:function(t){e.$set(e.form1,"tags",t)},expression:"form1.tags"}}):e._e()],1)],1)},o=[]},"4f6e":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},"517a":function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=uni.vk,i={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"设为客服",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"7vh",width:"600px"},form1:{data:{},props:{action:"admin/business/sys.user.updateUserBaseInfo",columns:[{key:"is_service_staff",title:"设为客服",type:"switch",activeValue:1,inactiveValue:0},{key:"service_staff_introduction",title:"客服介绍",type:"text",placeholder:"一句话介绍一下该客服"},{key:"social_info",title:"社交信息",type:"object",columns:[{key:"mobile",title:"手机号",type:"text"},{key:"weixin_no",title:"微信号",type:"text"},{key:"weixin_qrcode",title:"微信二维码",type:"image",limit:1}]}],rules:{"social_info.mobile":[{validator:o.pubfn.validator("mobile"),message:"手机号格式错误",trigger:"blur"}],service_staff_introduction:[{min:0,max:30,message:"长度在 0 到 30 之间",trigger:"blur"}]},labelWidth:"100px"}}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e;n.form1.data={_id:t._id,is_service_staff:t.is_service_staff,service_staff_introduction:t.service_staff_introduction,social_info:t.social_info}},onClose:function(){},onFormSuccess:function(){n.value.show=!1,o.pubfn.objectAssignForVue(n.value.item,n.form1.data,n),n.$emit("success")}},watch:{},computed:{}};t.default=i},5788:function(e,t,a){"use strict";a.r(t);var n=a("b22a"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},"6c7e":function(e,t,a){"use strict";a.r(t);var n=a("0c7c"),o=a("a736");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"81e7bc46",null,!1,n["a"],void 0);t["default"]=r.exports},"73b8":function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=uni.vk,i={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"设为核销员",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"7vh",width:"600px"},form1:{data:{},props:{action:"admin/business/sys.user.updateUserBaseInfo",columns:[{key:"is_verify_staff",title:"设为核销员",type:"switch",activeValue:1,inactiveValue:0}],rules:{},labelWidth:"100px"}}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e;n.form1.data={_id:t._id,is_verify_staff:t.is_verify_staff}},onClose:function(){},onFormSuccess:function(){n.value.show=!1,o.pubfn.objectAssignForVue(n.value.item,n.form1.data,n),n.$emit("success")}},watch:{},computed:{}};t.default=i},"75cf9":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText,"auto-close":!1,"max-height":"82vh"},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"userInfo",fn:function(t){t.form,t.keyName;return[a("v-uni-view",[a("v-uni-view",[a("el-avatar",{attrs:{size:20,src:e.userInfo.avatar}}),a("v-uni-text",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.userInfo.nickname))])],1),a("v-uni-view",[e._v("积分："+e._s(e.userInfo.balance))])],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},"7948c":function(e,t,a){var n=a("3462");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a("4f06").default;o("5132e51e",n,!0,{sourceMap:!1,shadowMode:!1})},"806a":function(e,t,a){"use strict";a.r(t);var n=a("981b"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},83588:function(e,t,a){"use strict";a.r(t);var n=a("48bc"),o=a("5788");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a("2160");var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"3aca5ed3",null,!1,n["a"],void 0);t["default"]=r.exports},8957:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page-body"},[a("v-uni-view"),a("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":["update","key1"],"right-btns-more":e.table1.rightBtnsMore,selection:!1,"row-no":!0,pagination:!0,size:"mini","custom-right-btns":e.table1.customRightBtns},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),a("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"500px",mode:"form","close-on-click-modal":!1},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[a("vk-data-form",{attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"100px"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},scopedSlots:e._u([{key:"tags",fn:function(t){var n=t.form,o=t.keyName;return[a("v-uni-view",[a("userTagscom",{attrs:{userInfo:n},model:{value:n[o],callback:function(t){e.$set(n,o,t)},expression:"form[keyName]"}})],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1),a("vk-data-dialog",{attrs:{title:"绑定企业微信",width:"500px",top:"14vh",center:!0,"close-on-click-modal":!0},model:{value:e.dialog.show1,callback:function(t){e.$set(e.dialog,"show1",t)},expression:"dialog.show1"}},[a("vk-data-form",{attrs:{action:e.form2.props.action,"form-type":e.form2.props.formType,columns:e.form2.props.columns,"label-width":"100px"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.dialog.show1=!1,e.refresh()}},model:{value:e.form2.data,callback:function(t){e.$set(e.form2,"data",t)},expression:"form2.data"}})],1),a("updateInviter",{on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.refresh.apply(void 0,arguments)}},model:{value:e.formDatas.updateInviter,callback:function(t){e.$set(e.formDatas,"updateInviter",t)},expression:"formDatas.updateInviter"}}),a("userTags",{on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.refresh.apply(void 0,arguments)}},model:{value:e.formDatas.userTags,callback:function(t){e.$set(e.formDatas,"userTags",t)},expression:"formDatas.userTags"}}),a("isServiceStaff",{model:{value:e.formDatas.isServiceStaff,callback:function(t){e.$set(e.formDatas,"isServiceStaff",t)},expression:"formDatas.isServiceStaff"}}),a("isVerifyStaff",{model:{value:e.formDatas.isVerifyStaff,callback:function(t){e.$set(e.formDatas,"isVerifyStaff",t)},expression:"formDatas.isVerifyStaff"}}),a("applyqrcode",{model:{value:e.formDatas.applyqrcode,callback:function(t){e.$set(e.formDatas,"applyqrcode",t)},expression:"formDatas.applyqrcode"}}),a("updateFxLv",{model:{value:e.formDatas.updateFxLv,callback:function(t){e.$set(e.formDatas,"updateFxLv",t)},expression:"formDatas.updateFxLv"}}),a("balance",{model:{value:e.formDatas.balance,callback:function(t){e.$set(e.formDatas,"balance",t)},expression:"formDatas.balance"}}),a("integral",{model:{value:e.formDatas.integral,callback:function(t){e.$set(e.formDatas,"integral",t)},expression:"formDatas.integral"}}),a("balanceTransfer",{on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.refresh.apply(void 0,arguments)}},model:{value:e.formDatas.balanceTransfer,callback:function(t){e.$set(e.formDatas,"balanceTransfer",t)},expression:"formDatas.balanceTransfer"}})],1)},o=[]},"8ba5":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},9735:function(e,t,a){"use strict";var n=a("4793"),o=a.n(n);o.a},"981b":function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d"),a("a434"),a("14d9");var o={props:{value:{Type:Array,default:function(){return[]}},userInfo:{Type:Object,default:function(){return{}}}},data:function(){return{page:{title:"标签",submitText:"关闭",top:"7vh",width:"600px",loading:!1,btnLoading:!1},inputVisible:!1,inputValue:"",form1:{tags:[]},myTags:[]}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=this.userInfo;vk.callFunction({url:"admin/business/sys.user.getTagList",loading:{that:n,name:"page.loading"},data:{pageIndex:1,pageSize:100},success:function(t){var a=t.rows,o=e.tags,i=void 0===o?[]:o;i.map((function(e,t){var n=vk.pubfn.getListIndex(a,"_id",e);n>-1&&(a[n].checked=!0)})),n.myTags=a}})},_input:function(e){n.$emit("input",e)},deleteTag:function(e,t){n.$confirm("此操作将从所有用户中删除此标签, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.myTags.splice(e,1),vk.callFunction({url:"admin/business/sys.user.delTag",loading:{that:n,name:"page.btnLoading"},data:{_id:t},success:function(e){}})})).catch((function(){}))},tagClick:function(e){n.$set(n.myTags[e],"checked",!n.myTags[e].checked);var t=[];n.myTags.map((function(e){e.checked&&e._id&&t.push(e._id)})),n._input(t)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},addTag:function(){var e=this.inputValue;if(e){if(vk.pubfn.getListIndex(n.myTags,"name",e)>-1)return n.$message.error("标签名称不可重复。"),!1;vk.callFunction({url:"admin/business/sys.user.addTag",loading:{that:n,name:"page.btnLoading"},data:{name:e},success:function(t){n.myTags.push({_id:t._id,name:e,checked:!1})}})}this.inputVisible=!1,this.inputValue=""}},watch:{},computed:{}};t.default=o},"989e":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".el-tag[data-v-08e00b87]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:5px}.input-new-tag[data-v-08e00b87]{margin:5px;width:90px;vertical-align:bottom}.button-new-tag[data-v-08e00b87]{margin:5px;height:32px;line-height:32px;padding-top:0;padding-bottom:0}",""]),e.exports=t},"9af8":function(e,t,a){"use strict";a.r(t);var n=a("517a"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},"9f72":function(e,t,a){"use strict";a.r(t);var n=a("c226"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},a1ce:function(e,t,a){"use strict";a.r(t);var n=a("a44d"),o=a("ecd4");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"4f0ea98e",null,!1,n["a"],void 0);t["default"]=r.exports},a309:function(e,t,a){"use strict";a.r(t);var n=a("4f6e"),o=a("9af8");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"237df574",null,!1,n["a"],void 0);t["default"]=r.exports},a44d:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},a59b:function(e,t,a){"use strict";var n=a("076a"),o=a.n(n);o.a},a736:function(e,t,a){"use strict";a.r(t);var n=a("1ced"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},af39:function(e,t,a){"use strict";a.r(t);var n=a("fde7"),o=a("3c25");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"22fefacc",null,!1,n["a"],void 0);t["default"]=r.exports},b0f8:function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;uni.vk;var o={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"积分",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"3vh",width:"500px"},form1:{data:{_id:"",isAdd:!0,updateTotal:!0},props:{action:"admin/business/sys.user.updateUserIntegral",columns:[{key:"userInfo",title:"用户信息",type:"text"},{key:"",title:"方式",type:"bar-title"},{key:"isAdd",title:"操作方式",type:"radio",data:[{value:!0,label:"增加"},{value:!1,label:"减少"}]},{key:"updateTotal",title:"是否影响累计",type:"radio",data:[{value:!0,label:"影响"},{value:!1,label:"不影响"}]},{key:"value",title:"积分变动数量",type:"number",width:600,tips:"影响用户积分",required:!0},{key:"",title:"备注",type:"bar-title"},{key:"remark",title:"备注",type:"textarea",width:600,autosize:{minRows:4,maxRows:10},maxlength:200,showWordLimit:!0}],rules:{isAdd:[{required:!0,message:"请选择操作方式",trigger:["blur","change"]}],value:[{required:!0,message:"积分数量不能为空",trigger:["blur","change"]}]},labelWidth:"120px"}},userInfo:{}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e;n.userInfo={nickname:t.nickname,avatar:t.avatar,balance:t.account_integral.balance},n.form1.data._id=t._id},onClose:function(){},onFormSuccess:function(e){n.value.show=!1,n.value.item.account_integral=e.data.userInfo.account_integral,n.$emit("success")}},watch:{},computed:{}};t.default=o},b22a:function(e,t,a){"use strict";a("7a82");var n=a("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(a("4610")),l=uni.vk,r={components:{userTagscom:i.default},props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:"",options:""}}}},data:function(){return{page:{title:"标签",submitText:"关闭",top:"7vh",width:"600px",loading:!1,btnLoading:!1},form1:{tags:[]}}},mounted:function(){o=this,o.init()},methods:{init:function(){var e=o,t=e.value;o._input(t)},_input:function(e){o.$emit("input",e)},onOpen:function(){o=this},onClose:function(){},open:function(){var e=o,t=e.value;t.show=!0,o._input(t)},close:function(){var e=o,t=e.value;t.show=!1,o._input(t)},save:function(){l.callFunction({url:"admin/business/sys.user.updateUserTag",loading:{that:o,name:"page.btnLoading"},data:{_id:o.value.item._id,tags:o.form1.tags},success:function(e){o.$emit("success"),o.close()}})}},watch:{},computed:{}};t.default=r},c226:function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=uni.vk,i=o.getVuex("$user.appInfo.fx.level_rule"),l={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"标题",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"7vh",width:"800px"},form1:{data:{},props:{action:"admin/business/sys.user.updateInviter",columns:[{key:"nickname",title:"昵称",type:"text-view"},{key:"mode",title:"类型",type:"radio",itemWidth:80,data:[{value:1,label:"从现有分销员中选择"},{value:2,label:"系统分销员"},{value:3,label:"无"}]},{key:"inviter_uid",title:"当前上级",type:"table-select",placeholder:"请选择上级",action:"admin/business/sys.user.getInviterSelectList",rowHeight:50,dialogWidth:960,pageSize:10,multiple:!1,formData:{my_id:""},columns:[{key:"avatar",title:"头像",type:"avatar",width:80,imageWidth:35,shape:"square"},{key:"nickname",title:"昵称",type:"text",nameKey:!0,formatter:function(e,t,a,n){var o=t.nickname;return t.comment&&(o+="（".concat(t.comment,"）")),o}},{key:"mobile",title:"手机号",type:"text",width:140},{key:"fx.lv",title:"分销等级",type:"select",width:100,placeholder:"请选择等级",data:i,props:{value:"lv",label:"name",children:"children"}},{key:"_id",title:"id",type:"text",idKey:!0,width:250}],queryColumns:[{key:"nickname",title:"昵称",type:"text",width:120,mode:"%%"},{key:"real_name",title:"姓名",type:"text",width:120,mode:"%%"},{key:"mobile",title:"手机号",type:"text",width:120,mode:"%%"},{key:"fx_lv",title:"等级",type:"select",width:120,data:i,fieldName:"fx.lv",props:{value:"lv",label:"name",children:"children"}}],showRule:"mode=1"}],rules:{inviter_uid:[{required:!0,message:"请选择上级",trigger:["blur","change"]}]},labelWidth:"100px"}}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e,a=t.inviter_uid?t.inviter_uid[0]:"",o=t.inviter_lock,i=1;a||(i=o?2:3),n.form1.data={mode:i,_id:t._id,nickname:t.nickname,inviter_uid:a,inviter_lock:o},n.form1.props.columns[2].formData.my_id=t._id},onClose:function(){},onFormSuccess:function(){n.value.show=!1,n.$emit("success")}},watch:{},computed:{}};t.default=l},c369:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{directives:[{name:"loading",rawName:"v-loading",value:e.page.loading,expression:"page.loading"}],staticStyle:{padding:"20px"}},[e._l(e.myTags,(function(t,n){return a("el-tag",{key:t.name,attrs:{closable:!0,"disable-transitions":!1,effect:t.checked?"dark":"plain"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tagClick(n)},close:function(a){arguments[0]=a=e.$handleEvent(a),e.deleteTag(n,t._id)}}},[e._v(e._s(t.name))])})),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){arguments[0]=t=e.$handleEvent(t),e.addTag.apply(void 0,arguments)}},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;arguments[0]=t=e.$handleEvent(t),e.addTag.apply(void 0,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small",type:"primary",plain:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showInput.apply(void 0,arguments)}}},[e._v("+ 新增标签")]),a("v-uni-view",{staticStyle:{"margin-top":"10px",color:"#999999"}},[e._v("提示：添加标签后，需要选中该标签才能给用户打上标签。")])],2)],1)},o=[]},c6f9:function(e,t,a){"use strict";a.r(t);var n=a("b0f8"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},c886:function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;uni.vk;var o={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"余额",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"3vh",width:"500px"},form1:{data:{_id:"",isAdd:!0,updateTotal:!0},props:{action:"admin/business/sys.user.updateUserBalance",columns:[{key:"userInfo",title:"用户信息",type:"text"},{key:"",title:"方式",type:"bar-title"},{key:"isAdd",title:"操作方式",type:"radio",data:[{value:!0,label:"增加"},{value:!1,label:"减少"}]},{key:"updateTotal",title:"是否影响累计",type:"radio",data:[{value:!0,label:"影响"},{value:!1,label:"不影响"}]},{key:"value",title:"余额变动数量",type:"money",width:600,tips:"影响用户余额",required:!0},{key:"",title:"备注",type:"bar-title"},{key:"remark",title:"备注",type:"textarea",width:600,autosize:{minRows:4,maxRows:10},maxlength:200,showWordLimit:!0}],rules:{isAdd:[{required:!0,message:"请选择操作方式",trigger:["blur","change"]}],value:[{required:!0,message:"余额数量不能为空",trigger:["blur","change"]}]},labelWidth:"120px"}},userInfo:{}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e;n.userInfo={nickname:t.nickname,avatar:t.avatar,balance:t.account_balance.balance},n.form1.data._id=t._id},onClose:function(){},onFormSuccess:function(e){n.value.show=!1,n.value.item.account_balance=e.data.userInfo.account_balance,n.$emit("success")}},watch:{},computed:{}};t.default=o},c919:function(e,t,a){"use strict";a.r(t);var n=a("0db4"),o=a("3621");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"0e5faadc",null,!1,n["a"],void 0);t["default"]=r.exports},cea3:function(e,t,a){"use strict";var n;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d"),a("d9e2"),a("d401");var o=uni.vk,i={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"余额转账",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"7vh",width:"500px"},form1:{data:{_id:"",user_id:""},props:{action:"admin/business/sys.user.balanceTransfer",columns:[{key:"userInfo",title:"用户信息",type:"text"},{key:"",title:"转账人信息",type:"bar-title"},{key:"user_id",title:"选择转账用户",type:"table-select",placeholder:"请选择转账用户",dialogWidth:900,pageSize:10,action:"admin/business/sys.user.getList",columns:[{key:"_id",title:"用户id",type:"text",idKey:!0,show:["none"]},{key:"avatar",title:"头像",type:"image",width:80},{key:"nickname",title:"用户昵称",type:"text",minWidth:200,align:"left",nameKey:!0},{key:"account_balance.balance",title:"余额",type:"money",width:120},{key:"mobile",title:"手机号",type:"text",width:140},{key:"tagList",title:"标签",type:"text",minWidth:160,formatter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return e.map((function(e,a){t+=e.name+"、"})),t=t?t.substring(0,t.length-1):"-",t}}],queryColumns:[{key:"nickname",title:"用户昵称",type:"text",width:200,mode:"%%"},{key:"mobile",title:"手机号",type:"text",width:200,mode:"%%"}],formData:{nickname:""},onChange:function(e,t,a,o,i){n.$set(t,"zz_nickname",i.nickname)}},{key:"value",title:"转账余额",type:"money"},{key:"remark",title:"转账备注",type:"textarea",autosize:{minRows:4,maxRows:10},maxlength:99,showWordLimit:!0}],rules:{user_id:[{required:!0,message:"转账对象不能为空",trigger:["blur","change"]}],value:[{required:!0,message:"转账余额不能为空",trigger:["blur","change"]},{validator:function(e,t,a){t>n.userInfo.balance?a(new Error("余额不足，最大为 ".concat(o.pubfn.priceFilter(n.userInfo.balance)))):a()},trigger:["blur","change"]}]},labelWidth:"120px"}},userInfo:{}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e;n.userInfo={nickname:t.nickname,avatar:t.avatar,balance:t.account_balance.balance},n.form1.data._id=t._id},onClose:function(){},onFormSuccess:function(e){n.value.show=!1,n.$emit("success")}},watch:{},computed:{}};t.default=i},d4e3:function(e,t,a){"use strict";a.r(t);var n=a("8957"),o=a("1e3e");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a("9735");var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"1ff72796",null,!1,n["a"],void 0);t["default"]=r.exports},db67:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,"",""]),e.exports=t},e087:function(e,t,a){"use strict";a.r(t);var n=a("8ba5"),o=a("9f72");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);var l=a("f0c5"),r=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"76d3244c",null,!1,n["a"],void 0);t["default"]=r.exports},ecd4:function(e,t,a){"use strict";a.r(t);var n=a("73b8"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},fde7:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText,"auto-close":!1},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"userInfo",fn:function(t){t.form,t.keyName;return[a("v-uni-view",[a("v-uni-view",[a("el-avatar",{attrs:{size:20,src:e.userInfo.avatar}}),a("v-uni-text",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.userInfo.nickname))])],1),a("v-uni-view",[e._v("余额："+e._s(e.vk.pubfn.priceFilter(e.userInfo.balance))+" 元")])],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},o=[]},ff48:function(e,t,a){"use strict";a.r(t);var n=a("1b41"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a}}]);