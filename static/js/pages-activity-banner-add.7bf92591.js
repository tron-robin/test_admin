(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-activity-banner-add"],{"0dfd":function(t,e,a){"use strict";a.r(e);var n=a("959a"),i=a("f65d");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("47da");var r=a("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"3bfb5131",null,!1,n["a"],void 0);e["default"]=s.exports},"0e60":function(t,e,a){var n=a("f384");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("07ef758c",n,!0,{sourceMap:!1,shadowMode:!1})},"47da":function(t,e,a){"use strict";var n=a("0e60"),i=a.n(n);i.a},"5da3a":function(t,e,a){"use strict";var n;a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("4e82");var i=uni.vk,o={},r={data:function(){return{page:{title:"",submitText:"",pickerOptions:i.pubfn.elementUtil.datePickerRangeOptions(),backPage:"/pages/activity/banner/banner"},form1:{type:"",bannerFile:"",content:"",activity_id:"",status:"",sort:0},open_city_list:[],formData1:{action:"admin/business/sys.banner.addUpdate",columns:[{key:"bannerFile",title:"图片",type:"image",limit:1,placeholder:"请上传图片",fileType:"image"},{key:"type",title:"类型",type:"select",placeholder:"请选择类型",width:300,data:[{value:1,label:"详情介绍"},{value:2,label:"活动"}]},{key:"activity_id",title:"活动",type:"table-select",placeholder:"请选择活动",showRule:"type == 2",action:"admin/business/sys.goods.getList",formData:{status:0},columns:[{key:"name",title:"活动名称",type:"text",nameKey:!0},{key:"registration_time",title:"报名截止时间",type:"time"},{key:"_id",title:"角色标识",type:"text",idKey:!0,show:["none"]}],queryColumns:[{key:"name",title:"活动名称",type:"text",width:150,mode:"%%"}]},{key:"content",title:"详情",type:"editor",placeholder:"请输入详情",showRule:"type == 1"},{key:"sort",title:"排序值",type:"number",width:300,tips:"值越大，商品显示越在前面。"},{key:"status",title:"状态",type:"select",placeholder:"请选择状态",width:300,data:[{value:1,label:"正常"},{value:0,label:"禁用"}]}],rules:{bannerFile:[{required:!0,message:"请上传图片",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:["blur","change"]}]},formType:"",show:!1,loading:!1,beforeAction:function(){}}}},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=this,i=n.vk,n.options=t,n.init(t)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(t){o["form1"]=i.pubfn.copyObject(n.form1),n.formData1.formType=t.mode,n.form1.mode=t.mode,"update"===t.mode?(n.page.title="轮播图编辑",n.page.submitText="修改",i.callFunction({url:"admin/business/sys.banner.pub_findBannerInfo",title:"请求中...",data:{_id:t._id},success:function(t){var e=i.pubfn.copyObject(n.form1);n.form1=i.pubfn.objectAssign(e,t.info)}})):(n.page.title="轮播图添加",n.page.submitText="添加",t._id?i.callFunction({url:"admin/business/sys.banner.pub_findBannerInfo",title:"请求中...",data:{_id:t._id},success:function(t){var e=i.pubfn.copyObject(n.form1),a={bannerFile:t.info.bannerFile,type:t.info.type,status:t.info.status,sort:t.info.sort,content:t.info.content,activity_id:t.info.activity_id};n.form1=i.pubfn.objectAssign(e,a),n.getSortMax()}}):n.getSortMax())},getSortMax:function(){i.callFunction({url:"admin/business/sys.banner.getMaxSort",data:{},success:function(t){n.form1.sort=t.sort+1}})},pageTo:function(t){i.navigateTo(t)},pageBack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("update"==t.formType){var e=this.getOpenerEventChannel();e.emit&&e.emit("update",t.data.info)}else if("add"==t.formType){var a=this.getOpenerEventChannel();a.emit&&a.emit("add")}var o=getCurrentPages();o.length>1&&o[0].route!==n.$page.route?i.navigateBack():n.page.backPage&&i.navigateTo(n.page.backPage),setTimeout((function(){i.menuTabs.closeTabs("/pages/banner/add")}),600)},resetForm:function(){i.pubfn.resetForm(o,n)},submitForm:function(){n.form1.mode=n.options.mode,"copy"==n.options.mode&&(n.form1.mode="add"),n.$refs.form1.submitForm()},formSuccess:function(t){"add"==n.formData1.formType?n.$alert("轮播图添加成功","提示",{confirmButtonText:"好的",callback:function(e){n.pageBack(t)}}):n.$alert("轮播图修改成功","提示",{confirmButtonText:"好的",callback:function(e){n.pageBack(t)}})}},watch:{},computed:{}};e.default=r},"959a":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[a("vk-data-page-header",{attrs:{title:t.page.title,"show-back":!0},on:{back:function(e){arguments[0]=e=t.$handleEvent(e),t.pageBack()}}}),a("v-uni-view",{staticClass:"page-body"},[a("vk-data-form",{ref:"form1",attrs:{rules:t.formData1.rules,action:t.formData1.action,"form-type":t.formData1.formType,columns:t.formData1.columns,"label-width":"100px","footer-show":!1,loading:t.formData1.loading},on:{"update:loading":function(e){arguments[0]=e=t.$handleEvent(e),t.$set(t.formData1,"loading",e)},success:function(e){arguments[0]=e=t.$handleEvent(e),t.formSuccess.apply(void 0,arguments)}},model:{value:t.form1,callback:function(e){t.form1=e},expression:"form1"}})],1),a("v-uni-view",{staticClass:"page-footer"},[a("el-button",{staticClass:"footer-back-btn",attrs:{plain:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pageBack()}}},[t._v("返回")]),a("el-button",{staticClass:"footer-update-btn",staticStyle:{"margin-left":"50px"},attrs:{loading:t.formData1.loading,type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitForm.apply(void 0,arguments)}}},[t._v(t._s(t.page.submitText))])],1)],1)},i=[]},f384:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";.padding-10[data-v-3bfb5131]{padding:10px}.marginLeft-10[data-v-3bfb5131]{margin-left:10px}.footer-update-btn[data-v-3bfb5131]{width:80px}.footer-back-btn[data-v-3bfb5131]{margin-left:20px;width:80px}\n/* 上传组件开始 */[data-v-3bfb5131] .sku-image .vk-data-upload .el-upload-dragger{height:60px}[data-v-3bfb5131] .sku-image .vk-data-upload .el-upload--picture-card{width:60px;height:60px}[data-v-3bfb5131] .sku-image .vk-data-upload .el-upload{width:60px;height:60px;line-height:60px}[data-v-3bfb5131] .sku-image .vk-data-upload .el-upload-list--picture-card .el-upload-list__item{width:60px;height:60px;line-height:60px}[data-v-3bfb5131] .sku-image .vk-data-upload .el-upload-list--picture-card .el-upload-list__item-thumbnail{width:60px;height:60px;line-height:60px}[data-v-3bfb5131] .sku-image .vk-data-upload .avatar{width:60px;height:60px}[data-v-3bfb5131] .sku-image .el-upload--picture-card i{font-size:14px;color:#8c939d}.hoverStyle[data-v-3bfb5131]:hover{-webkit-transform:scale(1.1);transform:scale(1.1)}',""]),t.exports=e},f65d:function(t,e,a){"use strict";a.r(e);var n=a("5da3a"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a}}]);