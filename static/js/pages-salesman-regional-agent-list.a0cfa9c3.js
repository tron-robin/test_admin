(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-salesman-regional-agent-list"],{"00b0":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,"",""]),e.exports=t},3878:function(e,t,a){"use strict";var i;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("acd8"),a("d9e2"),a("d401"),a("ac1f"),a("841c");var o=uni.vk,n={},r={data:function(){return{loading:!1,data:{},table1:{action:"admin/business/sys.fxRegionalAgent.getList",columns:[{key:"position",title:"代理区域",type:"address",minWidth:250},{key:"lv",title:"级别",type:"radio",width:80,sortable:"custom",data:[{value:1,label:"省级代理"},{value:2,label:"市级代理"},{value:3,label:"区级代理"}]},{key:"userInfo.avatar",title:"代理头像",type:"avatar",width:80},{key:"userInfo.nickname",title:"代理昵称",type:"text",minWidth:120},{key:"remark",title:"备注",type:"text",width:140},{key:"reward_rule",title:"奖励规则",type:"html",width:120,formatter:function(e,t,a,i){var n="";return n=e.is_calc?e.is_fixed_calc?"单品 * ".concat(parseFloat(o.pubfn.priceFilter(e.fixed_value))," 元"):"实付金额 * ".concat(o.pubfn.percentageFilter(e.proportion_value)):"无奖励",n}},{key:"add_time",title:"代理时间",type:"time",width:120,valueFormat:"yyyy-MM-dd",sortable:"custom"},{key:"exp_time",title:"到期时间",type:"time",width:120,valueFormat:"yyyy-MM-dd",defaultValue:"永久",sortable:"custom"},{key:"exp_time",title:"到期剩",type:"dateDiff2",endText:"已到期",width:80,defaultValue:"永久",sortable:"custom"}],multipleSelection:[],selectItem:""},queryForm1:{formData:{},columns:[{key:"position",title:"省",type:"address",width:120,mode:"=",level:1},{key:"position",title:"省市",type:"address",width:120,mode:"=",level:2},{key:"position",title:"省市区",type:"address",width:120,mode:"=",level:3},{key:"nickname",title:"代理者昵称",type:"text",width:160,mode:"%%",fieldName:"userInfo.nickname",lastWhereJson:!0},{key:"remark",title:"备注",type:"text",width:160,mode:"%%"},{key:"add_time",title:"代理时间",type:"datetimerange",width:350,mode:"[]"},{key:"exp_time",title:"到期时间",type:"datetimerange",width:350,mode:"[]"}]},form1:{data:{user_id:"",position:{},lv:0,add_time:"",reward_rule:{is_calc:!0,is_fixed_calc:!1},check_repeat:!0},props:{action:"",columns:[{key:"user_id",title:"选择用户",type:"table-select",placeholder:"请选择用户",action:"admin/business/sys.user.getList",formData:{is_fx:1},columns:[{key:"avatar",title:"头像",type:"avatar",width:60},{key:"nickname",title:"昵称",type:"text",nameKey:!0},{key:"mobile",title:"手机",type:"text"},{key:"comment",title:"备注",type:"text"},{key:"_id",title:"角色标识",type:"text",idKey:!0,show:["none"]}],queryColumns:[{key:"nickname",title:"昵称",type:"text",width:160,mode:"%%"},{key:"mobile",title:"手机号",type:"text",width:160,mode:"%%",lastWhereJson:!0},{key:"comment",title:"备注",type:"text",width:160,mode:"%%"},{key:"is_fx",title:"状态",type:"number",width:160,mode:"=",fieldName:"fx.is_fx",show:["none"]}],disabled:["update"]},{key:"remark",title:"备注",type:"text"},{key:"lv",title:"等级",type:"radio",optionType:"button",data:[{value:1,label:"省代"},{value:2,label:"市代"},{value:3,label:"区代"}],disabled:["update"]},{key:"position",title:"代理省",type:"address",level:1,showRule:"lv=1",disabled:["update"]},{key:"position",title:"代理市",type:"address",level:2,showRule:"lv=2",disabled:["update"]},{key:"position",title:"代理区",type:"address",level:3,showRule:"lv=3",disabled:["update"]},{key:"add_time",title:"起始时间",type:"date"},{key:"exp_time",title:"截止时间",type:"date"},{key:"check_repeat",title:"检查重复",type:"radio",optionType:"button",size:"mini",data:[{value:!0,label:"检查重复"},{value:!1,label:"不检查重复"}]},{key:"reward_rule",title:"奖励规则",type:"object"}],rules:{user_id:[{required:!0,message:"请选择用户",trigger:"blur"}],lv:[{required:!0,message:"请选择等级",trigger:"blur"},{validator:function(e,t,a){return"number"!==typeof t||t<=0?a(new Error("请选择等级")):a()},trigger:"blur"}],position:[{required:!0,message:"请选择省市区",trigger:"blur"}],add_time:[{required:!0,message:"起始时间不能为空",trigger:"blur"}],reward_rule:[{required:!0,message:"请正确填写奖励规则",trigger:"blur"},{validator:function(e,t,a){return t.is_calc&&t.is_fixed_calc&&!t.fixed_value?a(new Error("请正确填写奖励规则")):!t.is_calc||t.is_fixed_calc||t.proportion_value?a():a(new Error("请正确填写奖励规则"))},trigger:"blur"}]},formType:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,o=i.vk,i.options=e,i.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){n["form1"]=o.pubfn.copyObject(i.form1)},pageTo:function(e){o.navigateTo(e)},resetForm:function(){o.pubfn.resetForm(n,i)},search:function(){i.$refs.table1.search()},refresh:function(){i.$refs.table1.refresh()},getCurrentRow:function(){return i.$refs.table1.getCurrentRow()},currentChange:function(e){i.table1.selectItem=e},selectionChange:function(e){i.table1.multipleSelection=e},addBtn:function(){i.resetForm(),i.form1.props.action="admin/business/sys.fxRegionalAgent.add",i.form1.props.formType="add",i.form1.props.title="添加",i.form1.props.show=!0},updateBtn:function(e){var t=e.item;i.form1.props.action="admin/business/sys.fxRegionalAgent.update",i.form1.props.formType="update",i.form1.props.title="编辑",i.form1.props.show=!0,i.form1.data=t},deleteBtn:function(e){var t=e.item,a=e.deleteFn;a({action:"admin/business/sys.fxRegionalAgent.delete",data:{_id:t._id,b_user_id:t.b_user_id}})},batchBtn:function(e){switch(e){case 1:o.toast("批量操作按钮1");break;case 2:o.toast("批量操作按钮2");break;default:break}}},watch:{},computed:{}};t.default=r},"96d9":function(e,t,a){"use strict";a.r(t);var i=a("3878"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a},a8d9:function(e,t,a){"use strict";var i=a("b349"),o=a.n(i);o.a},b111:function(e,t,a){"use strict";a.r(t);var i=a("b931"),o=a("96d9");for(var n in o)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("a8d9");var r=a("f0c5"),l=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"2aee07b4",null,!1,i["a"],void 0);t["default"]=l.exports},b349:function(e,t,a){var i=a("00b0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("c954a9de",i,!0,{sourceMap:!1,shadowMode:!1})},b931:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page-body"},[a("vk-data-table-query",{attrs:{columns:e.queryForm1.columns,"main-columns":["position","nickname","remark"],size:"mini"},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),a("v-uni-view",[a("el-row",[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("添加代理")])],1)],1),a("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":["detail_auto","update","delete"],selection:!1,"row-no":!0,pagination:!0,size:"mini"},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),a("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"600px",mode:"form","close-on-click-modal":!1},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[a("vk-data-form",{staticStyle:{"user-select":"none"},attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"100px"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},scopedSlots:e._u([{key:"reward_rule",fn:function(t){var i=t.form,o=t.keyName;return[a("v-uni-view",[a("v-uni-text",{staticStyle:{"margin-right":"20px"}},[e._v("是否启用")]),a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:i[o].is_calc,callback:function(t){e.$set(i[o],"is_calc",t)},expression:"form[keyName].is_calc"}}),i[o].is_calc?a("v-uni-view",{staticStyle:{display:"grid","grid-template-columns":"100px 360px","align-items":"center","line-height":"40px"}},[a("v-uni-view",[e._v("奖励计算方式")]),a("vk-data-input-radio",{attrs:{optionType:"button",size:"mini",localdata:[{value:!1,label:"按百分比"},{value:!0,label:"按单品个数"}]},model:{value:i[o].is_fixed_calc,callback:function(t){e.$set(i[o],"is_fixed_calc",t)},expression:"form[keyName].is_fixed_calc"}}),a("v-uni-view",[e._v("奖励系数")]),i[o].is_fixed_calc?a("vk-data-input-money",{attrs:{size:"mini",placeholder:"请输入每个产品的奖励(元)",width:"220px",clearable:!1,rightText:"元"},model:{value:i[o].fixed_value,callback:function(t){e.$set(i[o],"fixed_value",t)},expression:"form[keyName].fixed_value"}}):a("vk-data-input-percentage",{attrs:{size:"mini",placeholder:"请输入奖励百分比",precision:2,max:100,width:"220px",clearable:!1},model:{value:i[o].proportion_value,callback:function(t){e.$set(i[o],"proportion_value",t)},expression:"form[keyName].proportion_value"}})],1):e._e()],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)],1)},o=[]}}]);